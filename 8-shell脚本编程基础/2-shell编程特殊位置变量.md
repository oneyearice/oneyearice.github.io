# ç¬¬2èŠ‚. shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡



## åˆè¯†å˜é‡ç”Ÿæ•ˆèŒƒå›´

1ã€ttyå†å¼€ä¸€ä¸ªç»ˆç«¯å°±æ²¡äº†

2ã€é€€å‡ºåå°±æ²¡äº†

3ã€å†æ¬¡è¿è¡Œ/bin/bashåå°±æ²¡äº†ğŸ‘‡

```
[23:15:39 root@host1 ~]#NAME=ming
[23:15:43 root@host1 ~]#echo $NAME
ming
[23:16:21 root@host1 ~]#pstree |grep -A 2 bash
        |-sshd---sshd---bash-+-grep
        |                    `-pstree
        |-systemd-journal
[23:16:34 root@host1 ~]#pstree -p |grep -A 2 bash
           |-sshd(1191)---sshd(2132)---bash(2140)-+-grep(2207)
           |                                      `-pstree(2206)
           |-systemd-journal(502)
[23:17:10 root@host1 ~]#/bin/bash
[23:17:17 root@host1 ~]#pstree -p |grep -A 2 bash
           |-sshd(1191)---sshd(2132)---bash(2140)---bash(2208)-+-grep(2239)
           |                                                   `-pstree(2238)
           |-systemd-journal(502)
[23:17:29 root@host1 ~]#echo $NAME

[23:17:36 root@host1 ~]#echo $BASHPID
2208
[23:17:49 root@host1 ~]#exit
exit
[23:17:52 root@host1 ~]#echo $BASHPID
2140
[23:17:56 root@host1 ~]#echo $NAME
ming
[23:17:58 root@host1 ~]#

```

çˆ¶è¿›ç¨‹çš„NAMEå˜é‡å¹¶æ²¡æœ‰ä¼ ç»™å­è¿›ç¨‹ã€‚

 æ¯ä¸ªè´¦å·éƒ½æœ‰ä¸ªshellç±»å‹ï¼Œæ¯”å¦‚ğŸ‘‡ï¼Œè¡¨ç¤ºrootè´¦å·ä¸€ç™»å…¥å°±ä¼šè‡ªåŠ¨å»è¿è¡Œ/bin/bash

```
[23:23:25 root@host1 ~]#getent passwd root
root:x:0:0:root:/root:/bin/bash
```

çˆ¶è¿›ç¨‹çš„NAMEå˜é‡å¹¶æ²¡æœ‰ä¼ ç»™å­è¿›ç¨‹ï¼Œå¦‚æœéœ€è¦ä¼ è¿›å»ï¼Œå°±è¦ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚

å…¶ä¸ŠğŸ‘†è¿™å¥è¯ä¹Ÿä¸å®Œå…¨å¯¹ï¼Œæ¢ä¸ªæ–¹å¼å°±èƒ½å°†å±€éƒ¨å˜é‡ä¼ è¿›å»äº†ï¼Œæ¯”å¦‚å°æ‹¬å·

![image-20220929194012681](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20220929194012681.png)



## ç¯å¢ƒå˜é‡

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image006-16439584030233.jpg)

<img src="2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20241126152910290.png" alt="image-20241126152910290" style="zoom:40%;" />

###  

### æŸ¥çœ‹ä¸Šçº§çˆ¶è¿›ç¨‹ç¼–å·

<img src="2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20241126153352102.png" alt="image-20241126153352102" style="zoom:50%;" />



### 

### æŸ¥çœ‹ç¯å¢ƒå˜é‡

envéƒ½æ˜¯ç¯å¢ƒå˜é‡

![image-20241126153735472](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20241126153735472.png)

ä¸¾ä¾‹EDITOR=vim

é»˜è®¤ç¼–è¾‘å™¨æ˜¯

vipwæ˜¯è°ƒç”¨çš„EDITORç¼–è¾‘å™¨è¿™ä¸ªå˜é‡ï¼Œè€ŒEDITORé»˜è®¤å¤åˆ¶åº”è¯¥å°±æ˜¯viï¼Œå¦‚ä¸‹ï¼š

<img src="2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20220204153802553.png" alt="image-20220204153802553" style="zoom:67%;" /> 

ç°åœ¨å°†EDITORæ”¹æˆvimï¼Œå†çœ‹ï¼Œå‘ç°è¿˜æ˜¯é»‘åº•ç™½å­—ï¼Œåªæœ‰å°†EDITORæå‡ä¸ºç¯å¢ƒå˜é‡ï¼Œæ‰ä¼šå‡ºå½©ï¼Œä¹Ÿå°±æ˜¯vipwè°ƒç”¨çš„æ˜¯ç¯å¢ƒå˜é‡EDITORé‡Œçš„å€¼ï¼Œå’Œæ™®é€šå˜é‡æ²¡æœ‰å…³ç³»(å› ä¸ºå½“EDITORä¸ºå±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œvipwå°±è°ƒä¸å‡ºæ¥å®ƒçš„vimå€¼)ã€‚

<img src="2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20220204154115391.png" alt="image-20220204154115391" style="zoom:67%;" /> 

## unset nameæ™®é€šå˜é‡å’Œç¯å¢ƒå˜é‡éƒ½é€‚ç”¨

**ç¯å¢ƒå˜é‡å¯ä»¥ç”±çˆ¶è¿›ç¨‹ä¼ ç»™å­è¿›ç¨‹**ï¼Œ**ä½†æ˜¯ä¸èƒ½ä»å­è¿›ç¨‹ä¼ ç»™çˆ¶è¿›ç¨‹**ï¼Œä¹Ÿå°±æ˜¯è¯´å­è¿›ç¨‹é‡Œä¿®æ”¹çš„ç¯å¢ƒå˜é‡åªåœ¨å­è¿›ç¨‹é‡Œæœ‰æ•ˆï¼Œé€€å‡ºå­è¿›ç¨‹åï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­è¿˜æ˜¯åŸæ¥çš„å€¼ï¼›**ä½†æ˜¯å­è¿›ç¨‹å†æ¬¡èµ‹å€¼å¯ä»¥å½±å“èº«åçš„å­è¿›ç¨‹**



ç¯å¢ƒå˜é‡--exportç­‰å‘½ä»¤ç”³æ˜è¿‡çš„æ‰æ˜¯ï¼Œå°±ä¼šä¼ é€’ç»™å­è¿›ç¨‹

<img src="2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20241126154150578.png" alt="image-20241126154150578" style="zoom:50%;" />



```
[23:49:22 root@host1 ~]#export name=ming
[23:49:42 root@host1 ~]#echo $name
ming
[23:49:46 root@host1 ~]#bash
[23:49:51 root@host1 ~]#echo $name
ming
[23:49:55 root@host1 ~]#name=yi
[23:50:11 root@host1 ~]#echo $name
yi
[23:50:13 root@host1 ~]#export name=yi   ğŸ‘ˆå¤šä½™åŠ¨ä½œï¼Œnameæ—©å°±æ˜¯ç¯å¢ƒå˜é‡äº†ï¼Œæ‰€ä»¥æ— éœ€å†æ¬¡ç”³æ˜
[23:50:24 root@host1 ~]#echo $name
yi
[23:50:28 root@host1 ~]#exit
exit
[23:50:29 root@host1 ~]#echo $name
ming
[23:50:31 root@host1 ~]#

```

<img src="2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20220204155221438.png" alt="image-20220204155221438" style="zoom:67%;" /> 



### **shellçš„åµŒå¥—æ·±åº¦**

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image020-164395840302410.jpg) 

### ä¸Šä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image022-164395840302411.jpg) 

![image-20220204160922084](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20220204160922084.png) 

### å¸¸é‡å°±æ˜¯åªè¯»å˜é‡

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image026-164395840302413.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image028-164395840302414.jpg)

### å¯èƒ½çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹é…åˆä½¿ç”¨æ˜¯æœ‰ç”¨çš„ï¼Œ

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image030-164395840302415.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image032-164395840302416.jpg)

### å°æ‹¬å·å°±æ˜¯å¼€å¯å­shellï¼Œä¸€è¿è¡Œå®Œï¼Œå­shellå°±é€€å‡ºäº†

æ³¨æ„åªé’ˆå¯¹å†…éƒ¨å‘½ä»¤å’Œå˜é‡èµ‹å€¼

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image034-164395840302417.jpg) 

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image036-164395840302418.jpg) 

##  è¯æ˜å°æ‹¬å·å°±æ˜¯å¼€å¯äº†å­shell

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image038-164395840302519.jpg) 

ä¸Šå›¾ğŸ‘†æ­¤æ—¶å¯ä»¥å†å¼€ä¸€ä¸ªçª—å£pstree -pçœ‹åˆ°ç¡®å®8542å°±æ˜¯7703çš„å­è¿›ç¨‹

![image-20220204162108153](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/image-20220204162108153.png) 

## å¤§æ‹¬å·å’Œå°æ‹¬å·æ˜¯ä¸åŒçš„

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image040-164395840302520.jpg) 

ä¸Šå›¾è¯´æ˜ï¼Œå°æ‹¬å·å¼€å¯å­è¿›ç¨‹ï¼Œå¤§æ‹¬å·ä¸å¼€å¯å­è¿›ç¨‹ã€‚

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image042-164395840302521.jpg)

 

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image044-164395840302522.jpg)

##  ä½ç½®å˜é‡



 

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image048-164395840302524.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image050-164395840302525.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image052-164395840302526.jpg)

è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥å°†è¾“å…¥çš„å›ºå®šä½ç½®çš„å‚æ•°å˜é‡ä¼ åˆ°è„šæœ¬é‡Œé¢ã€‚

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image054-164395840302527.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image056-164395840302528.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image058-164395840302529.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image060-164395840302530.jpg)

##  å¯¹æ¯”ä¸‹$*å’Œ$@

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image062-164395840302531.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image064-164395840302532.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image066-164395840302533.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image068-164395840302534.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image070.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image072-164395840302535.jpg)

 

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image074-164395840302536.jpg)

å¼•å·å¼•èµ·æ¥æ‰æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¸èƒ½å»æ‰ã€‚

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image076-164395840302637.jpg)

## ç»ƒä¹ ï¼Œrm=rm.shï¼Œrm.shé‡Œå†™mv f1.txt /tmp/å½“å‰æ—¥æœŸç²¾ç¡®åˆ°ç§’ï¼Œå¼€å±€è®¾ç½®é‡Œå¯ä»¥ç”¨

ç”¨mvæ›¿ä»£rm

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image080-164395840302639.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image082.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image084.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image086.jpg)

å¦‚æœè¦ä½¿ç”¨åŸæ¥çš„rmï¼Œåˆ™\rmå°±è¡Œäº†ï¼Œä¸è¿‡è¦è‡ªå¸¦-iäº†

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image088.jpg)

 

å…¶ä»–æ³¨æ„äº‹é¡¹

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image090.jpg)

![img](2-shellç¼–ç¨‹ç‰¹æ®Šä½ç½®å˜é‡.assets/clip_image092.jpg)

 
