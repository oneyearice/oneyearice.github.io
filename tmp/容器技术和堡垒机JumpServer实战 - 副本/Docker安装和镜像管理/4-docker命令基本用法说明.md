# ç¬¬4èŠ‚ dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜



# cliåˆ†ç±»

![image-20240329141147278](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329141147278.png)

swarmä¸è¡Œäº†ï¼Œè¢«k8sæ›¿ä»£äº†ï¼Œä¸å­¦ã€‚

ç®¡ç†ç±»ğŸ‘‡

![image-20240329141828036](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329141828036.png)

container ç®¡ç†å®¹å™¨

image ç®¡ç†é•œåƒ

network ç®¡ç†ç½‘ç»œ

volume ç®¡ç†å­˜å‚¨



è¿›ä¸€æ­¥è¿˜å¯ä»¥çœ‹docker image å¤§ç±»ä¸‹çš„å­å‘½ä»¤ğŸ‘‡

![image-20240329142036001](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329142036001.png)



![image-20240329142238407](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329142238407.png)

ä½†æ˜¯è€å¸æœºä¸çˆ±è¿™ç§åˆ†ç±»çš„cliï¼Œæ›´çˆ±ç›´æ¥ç‚¹æ¯”å¦‚

docker image ls å°±= docker images

![image-20240329142439034](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329142439034.png)



docker container ls  = docker ps

![image-20240329142811660](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329142811660.png)





![image-20240329143553883](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329143553883.png)

docker info è¿˜å¯ä»¥çœ‹åˆ°docker composeçš„ç‰ˆæœ¬ğŸ‘‡ ä»¥åŠ server é‡Œçš„å®¹å™¨ï¼š

runningè¿è¡Œçš„å‡ ä¸ªï¼Œpausedæš‚åœçš„å‡ ä¸ªï¼Œstoppedåœæ­¢çš„å‡ ä¸ª

![image-20240329143618045](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329143618045.png)

docker è·‘ä¸€ä¸ªhello worldï¼Œ

1ã€è¦çŸ¥é“docker è·‘å®¹å™¨ï¼Œå®¹å™¨é é•œåƒï¼Œé•œåƒå“ªé‡Œæ¥å‘¢

2ã€æœ¬åœ°æ‰¾æ‰¾

3ã€ä»“åº“æ‰¾æ‰¾

![image-20240329143910324](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329143910324.png)

ä¸Šå›¾å°±çš„Hello from Dockerï¼å­—çœ¼ å°±è¯´æ˜æ‰§è¡ŒæˆåŠŸäº†ï¼Œå®¹å™¨å°±æ˜¯è¿è¡Œå®Œå°±é‡Šæ”¾æ‰äº†ï¼Œè¿™é‡Œåˆä¸æ˜¯å½“ä½œå®ˆæŠ¤è¿›ç¨‹æ¥è·‘çš„ï¼Œæ‰€ä»¥docker psé‡Œçœ‹ä¸åˆ°äº†å°±ã€‚



docker pull hello-world åªä¸‹è½½ ä¸run

![image-20240329150130027](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329150130027.png)



docker run hello-world = docker pull hello-world + docker start hello-world



![image-20240329150719607](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329150719607.png)

æ³¨æ„çŸ¥è¯†å®¹å™¨è¿›ç¨‹é€€å‡ºäº†ï¼Œåªæ˜¯ç¨‹åºé€€å‡ºäº†ï¼Œè¿™ä¸ªå®¹å™¨è¿˜åœ¨ç£ç›˜ä¸Šã€‚

è¿›ç¨‹æ²¡äº†ï¼Œç£ç›˜ç©ºé—´ç…§æ ·å ç€çš„ä¼šï¼Œ

<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329151130034.png" alt="image-20240329151130034" style="zoom:70%;" /> 



![image-20240329151310820](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329151310820.png)

start èµ·æ¥åè¿è¡Œå®Œäº†ä¹Ÿä¼šé€€å‡ºçš„

![image-20240329151547964](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329151547964.png)



![image-20240329160037603](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329160037603.png)



# å¾ˆé‡è¦çš„ä¸€ä¸ªç›®å½•-imageä¸‹è½½å­˜æ”¾ç›®å½•

![image-20240329152028825](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329152028825.png)

è¿™ä¸ªç›®å½•æ˜¯é»˜è®¤å­˜æ”¾é•œåƒå’Œå®¹å™¨ç›¸å…³æ–‡ä»¶çš„ï¼Œè¿™ä¸ªç›®å½•æ²¡äº†ï¼Œæ‰€æœ‰å®¹å™¨ å’Œ æ‰€æœ‰é•œåƒå°±éƒ½æ²¡äº†ã€‚



é€Ÿåº¦çº¿ç´¢å°è¯•æ€»ç»“ï¼Œæˆ‘æ„Ÿè§‰è¦å•æ‹å‡ºæ¥â‘ â˜…ï¼šè¿™ä¸ªç›®å½•å¿…é¡»æ˜¯ä¸€ä¸ªé«˜é€Ÿä¸”å¤§çš„ç£ç›˜ï¼Œåˆé«˜åˆå¤§ï¼Œå› ä¸ºæ‰€æœ‰çš„imageså’Œcontainerséƒ½é»˜è®¤æ‰”åœ¨è¿™é‡Œï¼Œè·‘èµ·æ¥ï¼Œç¡¬ç›˜æ…¢ä¹Ÿä¼šæ‹–ç´¯å®¹å™¨çš„è¿è¡Œé€Ÿåº¦ã€‚ç”Ÿäº§ä¸­å¯ä»¥æ‰¾ä¸ªç›®å½•å•ç‹¬æŒ‚ä¸€ä¸ªé«˜é€Ÿçš„SSDï¼Œæ²¡é¢„ç®—å°±ç®—äº†å“¦ï¼Œä¸€èµ·ssdä¹Ÿæ˜¯okçš„ï¼Œå“ˆå“ˆï¼Œç¼ç¼è¡¥è¡¥æœ‰ä¸‰å¹´ä¹Ÿæ˜¯okçš„



å½»åº•åˆ é™¤å®¹å™¨ 

1ã€å¸è½½è½¯ä»¶ï¼šapt purge docker-ce  # ubuntuçš„

centosçš„â€œï¼šyum remove docker-ce ? è¿˜æ˜¯yum history list æ‰¾åˆ°idåyum history undo xx å¸çš„è¿˜å…¨å‘¢ï¼Œå¯¹å§ã€‚

2ã€åˆ é™¤è½¯ä»¶äº§ç”Ÿçš„æ–‡ä»¶ï¼šrm -rf /var/lib/docker

å­¦åˆ°è¿™é‡Œï¼Œæˆ‘åˆè¦é€¼é€¼ä¸¤å¥äº†ï¼Œåˆ é™¤Aï¼Œå°±æ˜¯è¦ä¸¤æ­¥èµ°â‘ åˆ é™¤Aâ‘¡åˆ é™¤Açš„å½±å“ï¼Œæœ‰é¦–æ­Œå« ä½ èº«ä¸Šçš„é¦™æ°´å‘³~~ï¼Œå°±æ˜¯äººèµ°äº†ï¼Œè¿˜å¾—é€šé£ã€‚HAä¹Ÿæ˜¯è¿™ä¸ªé“ç†ï¼Œä¸ç®¡æ˜¯çº¿è·¯çš„HAè¿˜æ˜¯èŠ‚ç‚¹çš„HAï¼Œå½“HAçš„æˆå‘˜æŒ‚äº†ä¸€ä¸ªï¼Œä½œä¸ºHAçš„åº•å±‚é€»è¾‘åŒæ ·éœ€è¦â‘ å»æ‰æ•…éšœæˆå‘˜â‘¡å»æ‰æ•…éšœæˆå‘˜å½“å‰çš„å½±å“(æ¯”å¦‚å…¨ç½‘ARPï¼Œä¼šè¯ç¼“å­˜ã€MACç¼“å­˜ç­‰)â‘¢å¦‚æœæ•…éšœæ¢å¤ä¸€æ ·è¦è§‚å¯Ÿä¸€ä¸‹æ˜¯ä¸æ˜¯çœŸçš„æ¢å¤äº†ç¨³å®šäº†æ‰èƒ½å°†æ•…éšœç‚¹é‡æ–°åŠ å›HAå¹¶ç»§ç»­æä¾›æœåŠ¡ã€‚



docker infoä¹Ÿæ˜¯å¯ä»¥çœ‹åˆ°æ•´ä¸ªé»˜è®¤å­˜æ”¾çš„å…³é”®ç›®å½•çš„

![image-20240329155611670](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329155611670.png)

å¯ä»¥æ¢æˆæˆåˆ«çš„ç›®å½•ï¼Œæ¯”å¦‚æ¢åˆ°ä¸€å—ç‰›é€¼plusçš„å•ç‹¬ç¡¬ç›˜ä¸Šå»ï¼Œæˆ–è€…å°†æ•´ä¸ªç›®å½•æŒ‚è¿‡å»éƒ½æ˜¯ä¸€æ ·çš„ã€‚



æä¸€ä¸ªrunåä¸é€€å‡ºçš„å®¹å™¨

![image-20240329161054740](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329161054740.png)



<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329161216695.png" alt="image-20240329161216695" style="zoom:40%;" />







é•œåƒæ˜¯åŸºäºä¸åŒçš„æ“ä½œç³»ç»Ÿåšå‡ºæ¥çš„ï¼Œæ‰€ä»¥docker runä¹Ÿå¥½pullä¹Ÿç½¢éƒ½æ˜¯è¦æ³¨æ„çš„ï¼Œ

![image-20240329171213541](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329171213541.png)

ç„¶åè¿˜å¯ä»¥åˆ°tagé‡Œå»çœ‹ç»†èŠ‚

ğŸ‘‡çœ‹ç€å°±æ˜¯ä¸åŒç³»ç»Ÿçš„é•œåƒï¼Œdocker pull nginxå°±æ˜¯ä¸‹è½½linuxçš„ä¸”æ˜¯latestçš„ç‰ˆæœ¬ã€‚

![image-20240329171258782](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329171258782.png)



alpineæ˜¯ä¸€ä¸ªç²¾ç®€çš„linux osã€‚æ˜¯åŸºäºæŸä¸ªosåˆ¶ä½œå‡ºæ¥çš„é•œåƒã€‚åŒºåˆ«é»˜è®¤çš„åº”è¯¥å°±æ˜¯debanå’Œubuntuçš„osåšå‡ºæ¥çš„ã€‚è¿™å¥è¯æ€ä¹ˆäº†ç†è§£å“¦ï¼š

å°±æ˜¯dockerçš„åˆ†å±‚æ¨¡å‹

![image-20240329174910547](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329174910547.png)

containerå±‚å°±æ˜¯docker engineäº†å®ç°äº†å®¹å™¨çš„éš”ç¦»ï¼Œé€šè¿‡namespaceå’Œcgroupä¸¤å¤§ç»„ä»¶åšåˆ°äº†éš”ç¦»å’Œèµ„æºçš„åˆ†é…ä»¥åŠé™åˆ¶ã€‚

é‚£ä¹ˆè¦ç†æ¸…æ¥šä¸€ä¸ªç‚¹ï¼šå°±æ˜¯

![image-20240329175029455](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329175029455.png)

è¿™äº›ç‰ˆæœ¬ä»£è¡¨çš„æ„æ€æ˜¯å•¥ï¼Œå¯¹åˆ†å±‚ç†è§£å°±ä¼šåŠ æ·±ä¸€ç‚¹ï¼Œ

![image-20240329175247257](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329175247257.png)

æ ¹æ®GPTå¤šè¯´ï¼Œå¯ä»¥è®¤ä¸ºå¥¹è®²çš„æ˜¯å¯¹çš„ï¼Œæˆ‘ä»¬ä¸‹è½½çš„é•œåƒå®ƒè‚¯å®šä¸æ˜¯dockerengine ï¼Œdocker engineæ˜¯docker serverè¿›ç¨‹ï¼Œè€Œimagesåç§°é‡Œçš„oså°±æ˜¯è¯´æˆ‘æ•´ä¸ªimageåˆ©ç”¨äº†åº•å±‚å®¿ä¸»osçš„å†…æ ¸(å¤§å®¶éƒ½æ˜¯linuxå†…æ ¸å•¦)ï¼Œç„¶åæˆ‘imageé‡Œè¿˜è‡ªå¸¦ä¸€äº›åŸºäºæ•´ä¸ªå†…æ ¸å®ç°ç²¾ç®€osï¼Œæ•´ä¸ªosæ˜¯åŠæˆå“osæ˜¯æ²¡æœ‰å†…æ ¸çš„osï¼ŒGPTç§°ä¹‹ä¸ºç”¨æˆ·ç©ºé—´--Alpine linuxçš„ç”¨æˆ·ç©ºé—´ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†+å®¿ä¸»çš„å†…æ ¸å°±æ„æˆäº†å®Œæ•´çš„osäº†ã€‚



<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329175853139.png" alt="image-20240329175853139" style="zoom:50%;" />



<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329175901167.png" alt="image-20240329175901167" style="zoom:50%;" />



<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329180315384.png" alt="image-20240329180315384" style="zoom:50%;" />



ä¹‹å‰å­¦ä¹ sendfileè¿™ä¸ª0å¤åˆ¶æŠ€æœ¯é€»è¾‘çš„æ—¶å€™ï¼Œè¿˜å¤´å¤´æ˜¯é“ï¼Œå…¶å®æ®Šä¸çŸ¥å½“æ—¶çš„æ•´å¼ å›¾å°±æ˜¯åœ¨OSé‡ŒèŠçš„ï¼Œå¯¹å§ï¼Œç”¨æˆ·ç©ºé—´ï¼Œå†…æ ¸ç©ºé—´ï¼Œè¿™äº›å°±æ˜¯OSå•Šï¼Œå”‰ï¼Œè ¢ç¬¨å¦‚æˆ‘~~~ 

<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329180704642.png" alt="image-20240329180704642" style="zoom:37%;" />



<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329180646848.png" alt="image-20240329180646848" style="zoom:37%;" />





<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240329181112552.png" alt="image-20240329181112552" style="zoom:49%;" />



user Space 1 2 3 å°±æ˜¯ä½ ä¸‹è½½çš„image å¹¶ä¸”è¿è¡Œèµ·æ¥çš„ å®¹å™¨ï¼Œè¿™äº›å®¹å™¨é€šè¿‡ containerä¹Ÿå°±æ˜¯docker å¼•æ“ (namespace + Cgroup) æ¥éš”ç¦»ä¸”é™åˆ¶åœ°ä½¿ç”¨äº†HOST OSçš„å†…æ ¸ï¼Œä½†æ˜¯OSæœ¬èº«è¿˜æœ‰ç”¨æˆ·ç©ºé—´ï¼Œè¿™éƒ¨åˆ†userSpace1 2 3 çš„å®¹å™¨æ˜¯æ²¡æœ‰ä½¿ç”¨çš„ï¼Œä»–ä»¬å„è‡ªç”¨çš„è‡ªå®¶çš„imageé‡Œå°è£…å¥½çš„è‡ªå¸¦äº†osä¸€éƒ¨åˆ†çš„ç”¨æˆ·ç©ºé—´ã€‚



å¥½äº†åå¤æ‹‰æ‰¯åº”è¯¥é è°±äº†





![image-20240401092736721](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401092736721.png)

å®¹å™¨è¿è¡Œèµ·æ¥å°±æ˜¯ä¸€ä¸ªå°OSï¼Œè‡ªå·±imageé‡Œçš„ç”¨æˆ·ç©ºé—´ + åº•å±‚å®¿ä¸»çš„OSé‡Œçš„å†…æ ¸ç©ºé—´  æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„OSï¼Œé‚£ä¹ˆæ˜¯æœ‰è‡ªå·±çš„IPåœ°å€çš„ã€‚æŸ¥çœ‹æ–¹æ³•docker inspect    #  å…¶å®è¿˜å¯ä»¥inspect é•œåƒ ç½‘ç»œ å­˜å‚¨ ç­‰æ‰€æœ‰èµ„æºçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¥½æ¯”ä¸€ä¸ªä¸‡èƒ½å‘½ä»¤ã€‚

![image-20240401093327812](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401093327812.png)

inspecté‡Œæ˜¯æœ‰å®¹å™¨çš„IPçš„ï¼Œip aæ˜¯çœ‹ä¸åˆ°çš„å“¦ğŸ‘‡

![image-20240401093704711](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401093704711.png)



å†runä¸€ä¸ªnginxï¼Œipå°±æ˜¯0.3ï¼ŒæŒ‰éœ€å‘æ”¾çš„ã€‚

![image-20240401094620664](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401094620664.png)Â·



![image-20240401094815991](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401094815991.png)

![image-20240401094854277](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401094854277.png)



å†æŠŠå®¹å™¨å¯åŠ¨èµ·æ¥ï¼Œå¤§å°å°±æ¢å¤äº†

![image-20240401095819841](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401095819841.png)

![image-20240401095909492](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401095909492.png)

![image-20240401100057933](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401100057933.png)





![image-20240401095255449](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401095255449.png)

å›¾ä¸­Næ˜¯imageçš„nginxçš„nç®€ç§°ï¼ŒN1 N2å°±æ˜¯ä¸¤ä¸ªå®¹å™¨ï¼Œå„è‡ªå¯åŠ¨å°±ä¼šå„è‡ªä»imageå¤åˆ¶ä¸€ä»½é•œåƒè¿‡æ¥ã€‚åœæ­¢N1åä»é•œåƒå¤åˆ¶è¿‡æ¥çš„é‚£éƒ¨åˆ†å°±åˆ äº†ï¼Œä½†æ˜¯N1çš„æ•°æ®è¿˜åœ¨ã€‚



![image-20240401100705465](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401100705465.png)



### ä¸è¦ç”¨swapï¼Œç®—ä½œå†…å­˜ä¼˜åŒ–å§

ä»¥å‰çš„docker info å°±æ˜¯è€ç‰ˆæœ¬ä¼šæœ‰ä¸€ä¸ªæç¤ºå°±æ˜¯swapçš„é™åˆ¶limit

<img src="4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401102253666.png" alt="image-20240401102253666" style="zoom:50%;" />

è§£å†³æ–¹æ³•å°±æ˜¯ï¼Œå…³é—­swapï¼Œå†…å­˜ä¸å¤ŸåŠ å†…å­˜ï¼Œåˆ«TMDç”¨ç£ç›˜ä½œå†…å­˜ï¼Œåˆ°æ—¶å€™é€Ÿåº¦è·Ÿä¸ä¸Šéº»çƒ¦çš„å¾ˆï¼

docker å’Œ k8séƒ½ è¦å…³æ‰swapï¼

swapoff -a   # ä¸´æ—¶ç¦swap

åœ¨/etc/fstabé‡Œåˆ æ‰æŒ‚è½½swapçš„é‚£è¡Œï¼Œä¿å­˜åï¼Œå¹¶swapoff -aä¸€ä¸‹ã€‚

![image-20240401102833846](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401102833846.png)

è¿˜å¯ä»¥åœæ­¢swapçš„æœåŠ¡

![image-20240401103312439](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401103312439.png)

maskå°±æ˜¯åœæ‰äº†ï¼Œæ€ä¹ˆä¸æ˜¯stopå’Œ disableå‘¢ã€‚

maskæ‰ï¼Œstartéƒ½èµ·ä¸æ¥çš„ï¼Œ

![image-20240401111217027](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401111217027.png)

![image-20240401111429604](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401111429604.png)





# docker0ä¹Ÿæ˜¯ç½‘æ¡¥



![image-20240401112334393](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401112334393.png)



ç¡®å®ä¸‹æ˜¯å¦æ˜¯ç½‘æ¡¥ï¼Œå®‰è£…æŸ¥çœ‹å·¥å…·

![image-20240401112408213](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401112408213.png)



![image-20240401112422064](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401112422064.png)



å¦‚æœå¼€ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨ä¹Ÿä¼šç”Ÿæˆä¸“é—¨çš„ç½‘å¡ï¼Œå®¹å™¨çš„ç½‘å¡å°±ä¼šå’Œè¿™ä¸ªç½‘æ¡¥docker0å…³è”åœ¨ä¸€èµ·

![image-20240401112741387](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401112741387.png)

è€Œä¸”è¿™äº›å®¹å™¨ä¸“é—¨çš„ç½‘å¡ip aéƒ½èƒ½çœ‹åˆ°ï¼Œåªæ˜¯IPè¿˜éœ€è¦docker inpsectå»æŸ¥çœ‹

![image-20240401112854011](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401112854011.png)

è¿™ç‚¹å’Œkvmä¸€æ ·ğŸ‘†ï¼šå…³è”ç½‘å¡ï¼Œä»¥åŠipåœ°å€ï¼Œdockeræ˜¯172.17   kvmé‚£é‡Œæ˜¯192.168.122ï¼›éƒ½å¯ä»¥æ”¹ã€‚åé¢ä¸“é—¨å•ç¯‡è®²ç½‘ç»œã€‚

åŒæ ·å’Œkvmä¸€æ ·çš„ï¼Œiptables è§„åˆ™ä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ

![image-20240401113108357](4-dockerå‘½ä»¤åŸºæœ¬ç”¨æ³•è¯´æ˜.assets/image-20240401113108357.png)

