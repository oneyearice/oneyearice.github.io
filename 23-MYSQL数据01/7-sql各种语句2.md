# ç¬¬7èŠ‚. sqlå„ç§è¯­å¥2



## DMLè¯­å¥



### insert å‰åä¸€ä¸€å¯¹åº”

![image-20230331103231763](7-sqlå„ç§è¯­å¥2.assets/image-20230331103231763.png)

idé»˜è®¤è‡ªå¢é•¿ã€genderæ€§åˆ«æœ‰é»˜è®¤å€¼

![image-20230331103415678](7-sqlå„ç§è¯­å¥2.assets/image-20230331103415678.png)

æ·»åŠ å¤šæ¡è®°å½•

![image-20230331103600720](7-sqlå„ç§è¯­å¥2.assets/image-20230331103600720.png)

åªè¦å‰åçš„åŸŸåå’Œå€¼ä¸€ä¸€å¯¹åº”å°±è¡Œï¼Œé¡ºåºä¸å›ºå®š

![image-20230331103901387](7-sqlå„ç§è¯­å¥2.assets/image-20230331103901387.png)

å­—ç¬¦é›†ï¼Œè¡¨æ˜¯é›†æˆçš„åº“çš„

![image-20230331112659540](7-sqlå„ç§è¯­å¥2.assets/image-20230331112659540.png)

![image-20230331112932542](7-sqlå„ç§è¯­å¥2.assets/image-20230331112932542.png)

ç°åœ¨çš„ç‰ˆæœ¬éƒ½ä¸è®©ä½ æ’å…¥ä¸æ”¯æŒçš„å­—ç¬¦ã€‚



æ¢ä¸ªæ•°æ®åº“æµ‹è¯•ä¸€ä¸‹å­—ç¬¦é›†çš„æ”¯æŒæƒ…å†µ

![image-20230331114754055](7-sqlå„ç§è¯­å¥2.assets/image-20230331114754055.png)

åˆ›å»ºè¡¨æ–¹æ³•1ğŸ‘†ï¼Œé¡ºä¾¿ä¹Ÿæ¢ç§æ–¹å¼åˆ›å»ºè¡¨ï¼Œ

åˆ›å»ºè¡¨æ–¹æ³•2ï¼šä»¥ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„ç»“æœæ¥åˆ›å»ºè¡¨ï¼Œ

åˆ›å»ºè¡¨æ–¹æ³•3ï¼šå¤åˆ¶è¡¨

```
(2) é€šè¿‡æŸ¥è¯¢ç°å­˜è¡¨åˆ›å»ºï¼›æ–°è¡¨ä¼šè¢«ç›´æ¥æ’å…¥æŸ¥è¯¢è€Œæ¥çš„æ•°æ® 
CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    [(create_definition,...)]	
    [table_options]
    [partition_options]	
    select_statement

(3) é€šè¿‡å¤åˆ¶ç°å­˜çš„è¡¨çš„è¡¨ç»“æ„åˆ›å»ºï¼Œä½†ä¸å¤åˆ¶æ•°æ®
CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name 
    { LIKE old_tbl_name | (LIKE old_tbl_name) }

```

![image-20230331115414874](7-sqlå„ç§è¯­å¥2.assets/image-20230331115414874.png)

ä½†æ˜¯å¤åˆ¶åˆ›å»ºè¡¨çš„å­—ç¬¦é›†è¿˜æ˜¯latinæ˜¯åŸè¡¨çš„å­—ç¬¦é›†

è€Œæ–°å»ºçš„è¡¨å°±æ˜¯é›†æˆäº†æ•°æ®åº“çš„å­—ç¬¦é›†utf8mb4

![image-20230331115549579](7-sqlå„ç§è¯­å¥2.assets/image-20230331115549579.png)

åˆ›å»ºæ–¹æ³•3ï¼Œ

![image-20230331115857714](7-sqlå„ç§è¯­å¥2.assets/image-20230331115857714.png)

æ­¤æ—¶ä¾æ®æŸ¥è¯¢ç»“æœæ¥åˆ›å»ºè¡¨ï¼Œä¸æ¶‰åŠåŸè¡¨çš„é»˜è®¤æ ¼å¼æ¯”å¦‚å­—ç¬¦é›†ï¼Œæ‰€ä»¥è¡¨æœ¬èº«è¿˜æ˜¯æ–°å»ºçš„ï¼Œå­—ç¬¦é›†é›†æˆäº†æ•°æ®åº“çš„utf8mb4ã€‚ä½†æ˜¯ï¼è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶ä¾æ—§æ— æ³•åœ¨æ­¤è¡¨ä¸­åˆ›å»ºä¸­æ–‡ï¼Œå› ä¸ºä»”ç»†çœ‹ä¸Šå›¾ï¼Œè™½ç„¶ENGINEå¼•æ“é‡Œæ˜¯ä¿®æ”¹äº†utf8mb4ï¼Œä½†æ˜¯nameå­—æ®µè¿˜æ˜¯latin1_swedish_ciï¼Œæ‰€ä»¥å§“åä¾ç„¶ä¸èƒ½å†™ä¸­æ–‡ã€‚

ä¸‰ç§æ–¹æ³•çš„åˆ›å»ºï¼Œåªæœ‰select ç»“æœåˆ›å»ºï¼Œæ˜¯å¸¦ä¸Šäº†åŸè¡¨å†…å®¹äº†

![image-20230331120110511](7-sqlå„ç§è¯­å¥2.assets/image-20230331120110511.png)



##### insert æ’å…¥å¯ä»¥ä¸å†™åŸŸåï¼Œå°±æ˜¯valuesé‡Œå¿…é¡»å†™å…¨ï¼Œå¦‚ä¸‹ï¼š

![image-20230406092939221](7-sqlå„ç§è¯­å¥2.assets/image-20230406092939221.png)



### è¿˜æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯çš„å­—ç¬¦é›†çš„æƒ…å†µ

![image-20230406093209688](7-sqlå„ç§è¯­å¥2.assets/image-20230406093209688.png)

å®¢æˆ·ç«¯çš„å­—ç¬¦é›†æ—¶auto è‡ªåŠ¨çš„

åˆ¶å®šä¸€ä¸‹å­—ç¬¦é›†

å¯¹æ¯”ä¸€ä¸‹åˆ¶å®šå­—ç¬¦é›†å’Œä¸æŒ‡å®šå­—ç¬¦é›†çš„åŒºåˆ«

![image-20230406093649870](7-sqlå„ç§è¯­å¥2.assets/image-20230406093649870.png)

![image-20230406093749813](7-sqlå„ç§è¯­å¥2.assets/image-20230406093749813.png)

dbå¹¶æ²¡æœ‰åŒºåˆ«ï¼Œç„¶åclient charactersetå®¢æˆ·ç«¯å­—ç¬¦é›†åŒæ ·æ²¡å•¥å˜åŒ–ï¼Œéƒ½æ˜¯utf8mb4ï¼Œè¿™ä¸æ˜¯OKå¾—å•Šï¼Œè¿˜æŒ‡å•¥æŒ‡å‘¢ã€‚

è¿›å…¥ä¸€ä¸ªDBåï¼Œstatuså‘ç°å˜åŒ–äº†



![image-20230406093853226](7-sqlå„ç§è¯­å¥2.assets/image-20230406093853226.png)

server charactoersetæ˜¯æ•´ä¸ªmysqlå®ä¾‹ç”¨çš„å­—ç¬¦é›†ï¼Œæ‰€è°“å®ä¾‹ï¼Œå°±æ˜¯mysqlè¿™ä¸ªæœåŠ¡ï¼Œä¸€èˆ¬å¤šå®ä¾‹å°±æ˜¯å¤šç›‘å¬ç«¯å£ã€‚

db charactoersetæ˜¯å®ä¾‹ä¸‹é¢çš„æŸä¸ªdbä½¿ç”¨çš„å­—ç¬¦é›†

client charactersetæ˜¯å®¢æˆ·ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†

conn charactersetæœ›æ–‡ç”Ÿä¹‰å°±æ˜¯é“¾æ¥çš„å­—ç¬¦é›†ï¼Œä¸æ˜è§‰å‰



ä½†æ˜¯tableé‡Œçš„nameè¿˜æ˜¯æ‹‰ä¸å­—ç¬¦é›†å•Šï¼Œå¯¹ä¸å¯¹ï¼Œæˆ‘ä¸ç”¨ç»§ç»­å¬ä½ è®²ï¼Œ éƒ½çŸ¥é“ä½ çš„æ€è·¯æ˜¯ä¸å¯¹çš„ã€‚

![image-20230406093512054](7-sqlå„ç§è¯­å¥2.assets/image-20230406093512054.png)



é€€å‡ºä¸€ä¸‹ï¼Œæ”¹ä¸ºä¸åˆ¶å®šå­—ç¬¦é›†çš„è¿›å…¥æ–¹å¼

![image-20230406094546604](7-sqlå„ç§è¯­å¥2.assets/image-20230406094546604.png)

##### show variables like "%character%"

![image-20230406094646025](7-sqlå„ç§è¯­å¥2.assets/image-20230406094646025.png)



### æ€»ç»“ï¼šå­—ç¬¦é›†å®šä¹‰çš„åœ°æ–¹

1ã€å®ä¾‹

2ã€DB

3ã€table

4ã€å­—æ®µ

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜çœ‹åˆ°äº†clientã€conn



##### æ”¹å­—æ®µçš„å­—ç¬¦é›†

 ALTER TABLE student3 CHANGE name name VARCHAR(20) CHARACTER SET utf8mb4;

![image-20230406111513480](7-sqlå„ç§è¯­å¥2.assets/image-20230406111513480.png)



![image-20230406111637743](7-sqlå„ç§è¯­å¥2.assets/image-20230406111637743.png)

ç»ˆäºæ”¯æŒä¸­æ–‡äº†ï¼Œå…¶å®ä¸€å¼€å§‹åˆ›å»ºå®ä¾‹çš„æ—¶å€™å°±åˆ¶å®šå¥½æ”¯æŒutf8mb4å°±è¡Œäº†

![image-20230406111752018](7-sqlå„ç§è¯­å¥2.assets/image-20230406111752018.png)



æ•°æ®åº“ç›¸å…³çš„å˜é‡

![image-20230505085323141](7-sqlå„ç§è¯­å¥2.assets/image-20230505085323141.png)

ä¿®æ”¹é…ç½®æ–‡ä»¶

![image-20230505085923199](7-sqlå„ç§è¯­å¥2.assets/image-20230505085923199.png)



![image-20230505085900221](7-sqlå„ç§è¯­å¥2.assets/image-20230505085900221.png)



![image-20230505115313690](7-sqlå„ç§è¯­å¥2.assets/image-20230505115313690.png)

å®¢æˆ·ç«¯çš„å­—ç¬¦é›†ï¼Œä¸Šé¢æ˜¯å‘½ä»¤é€‰é¡¹ï¼Œä¸‹é¢æ˜¯å†™å…¥é…ç½®æ–‡ä»¶é‡Œ

![image-20230505115645072](7-sqlå„ç§è¯­å¥2.assets/image-20230505115645072.png)

![image-20230505120007257](7-sqlå„ç§è¯­å¥2.assets/image-20230505120007257.png)

è™½ç„¶è¿™ä¸ªä¿®æ”¹ä¸ç”¨é‡å¯å°±èƒ½çœ‹åˆ°æ•ˆæœï¼Œä½†æ˜¯è¿˜æ˜¯è¦é‡ä¸€ä¸‹ï¼Œå› ä¸ºï¼Œå¦‚æœä½ æ”¹çš„æ˜¯/etc/my.cnfé‡Œçš„

![image-20230505120120204](7-sqlå„ç§è¯­å¥2.assets/image-20230505120120204.png)

è¿™æ ·æ˜¯è¯­æ³•é”™è¯¯ï¼Œé‡å¯æœåŠ¡æŠ¥é”™çš„ï¼Œä½†æ˜¯ä¸é‡å¯ï¼Œmysql è¿›å…¥ç«Ÿç„¶clientå­—ç¬¦é›†æ˜¯ä¿®æ”¹æˆåŠŸçš„ã€‚æ‰€ä»¥å¥‡è‘©å§ã€‚



æŸ¥çœ‹defaultæ•ˆæœ

![image-20230510154915141](7-sqlå„ç§è¯­å¥2.assets/image-20230510154915141.png)







å¯¼å…¥ä¸€ä¸ªç°æˆçš„è„šæœ¬ï¼Œç”Ÿäº§æ•°æ®åº“æ–‡ä»¶ä¾›ç»ƒä¹ ä½¿ç”¨

mysql -uroot -pCisc0@123 < hellodb_innodb.sql

é™¤äº†insertè¯­å¥è¿˜å¯ä»¥ç”¨çš„åˆ«çš„

![image-20230511091003862](7-sqlå„ç§è¯­å¥2.assets/image-20230511091003862.png)



![image-20230511091308903](7-sqlå„ç§è¯­å¥2.assets/image-20230511091308903.png)

StuIDæœ‰è‡ªåŠ¨å¢é•¿å±æ€§ï¼Œæ‰€ä»¥insertçš„æ—¶å€™ä¸ç”¨æ‰‹åŠ¨æŒ‡å®šäº†

![image-20230511091616424](7-sqlå„ç§è¯­å¥2.assets/image-20230511091616424.png)

setè¿™ç§æ ¼å¼ç”¨çš„ä¸å¤šğŸ‘†è¿™æ˜¯insertçš„ç¬¬äºŒç§è¯­æ³•



è¿˜æœ‰insertç¬¬ä¸‰ç§è¯­æ³•ï¼Œä¹Ÿä¸å¤šç”¨çš„ï¼Œäº†è§£ä¸€ä¸‹ï¼Œ

é€‚åˆæŠŠä¸€ä¸ªè¡¨ä¸­çš„æŸ¥è¯¢ç»“æœæ‰¹é‡å¯¼å…¥åˆ°å¦ä¸€ä¸ªè¡¨ç§

![image-20230511092103807](7-sqlå„ç§è¯­å¥2.assets/image-20230511092103807.png)





æ›´æ”¹çš„æŒ‡ä»¤

è¦åˆ¶å®šæ›´æ”¹çš„å“ªæ¡è®°å½•é‡Œçš„å“ªä¸ªå­—æ®µ

![image-20230511092401392](7-sqlå„ç§è¯­å¥2.assets/image-20230511092401392.png)

![image-20230511092716335](7-sqlå„ç§è¯­å¥2.assets/image-20230511092716335.png)

![image-20230511092736594](7-sqlå„ç§è¯­å¥2.assets/image-20230511092736594.png)

å¦‚æœupdateçš„æ—¶å€™ä¸åŠ whereé™åˆ¶æ¡ä»¶ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è®°å½•éƒ½è¢«æ”¹äº†ï¼Œè¿™å°±æ˜¯ç¾éš¾æ€§çš„æ“ä½œäº†ï¼Œå’Œåˆ åº“ä¹Ÿå·®ä¸å¤šäº†

![image-20230511092934944](7-sqlå„ç§è¯­å¥2.assets/image-20230511092934944.png)

ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿ

![image-20230511093002027](7-sqlå„ç§è¯­å¥2.assets/image-20230511093002027.png)

dummyç¬¨è›‹çš„æ„æ€

![image-20230511093214933](7-sqlå„ç§è¯­å¥2.assets/image-20230511093214933.png)

-Uæ˜¯å‘½ä»¤é‡Œçš„ï¼Œä¹Ÿå¯ä»¥å†™åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œæåˆ°é…ç½®æ–‡ä»¶è¦çŸ¥é“æ˜¯  serverçš„é…ç½®æ–‡ä»¶ è¿˜æ˜¯ client é…ç½®æ–‡ä»¶

è¿™é‡Œçš„mysql -Uåº”è¯¥æ˜¯å®¢æˆ·ç«¯çš„å‘½ä»¤ï¼Œæ‰€ä»¥æ˜¯clienté…ç½®æ–‡ä»¶é‡Œä¿®æ”¹

![image-20230511093546807](7-sqlå„ç§è¯­å¥2.assets/image-20230511093546807.png)

![image-20230511093538420](7-sqlå„ç§è¯­å¥2.assets/image-20230511093538420.png)

æ•ˆæœOK

![image-20230511093631523](7-sqlå„ç§è¯­å¥2.assets/image-20230511093631523.png)





DELETåˆ é™¤å‘½ä»¤

![image-20230511094058531](7-sqlå„ç§è¯­å¥2.assets/image-20230511094058531.png)

![image-20230511094115696](7-sqlå„ç§è¯­å¥2.assets/image-20230511094115696.png)

![image-20230511094211183](7-sqlå„ç§è¯­å¥2.assets/image-20230511094211183.png)

ç”±äºå¼€å¯äº†å®‰å…¨æ¨¡å¼ï¼Œæ‰€ä»¥ä¸è®©æ¸…è¡¨ï¼ŒğŸ‘†è¿™æ˜¯æ¸…è¡¨ï¼Œä¸æ˜¯åˆ è¡¨ï¼Œåˆ è¡¨æ˜¯DROP

å½“ä½ çš„è¡¨ä¸­è®°å½•éå¸¸å¤šçš„æ—¶å€™ï¼Œæ¸…è¡¨é€Ÿåº¦å°±è¦å¿«ï¼Œæ­¤æ—¶å°±ä¸èƒ½ç”¨DELETEï¼Œè€Œæ˜¯ç”¨TRUNCATE

![image-20230511094418439](7-sqlå„ç§è¯­å¥2.assets/image-20230511094418439.png)

å› ä¸ºDELETEåˆ è¡¨è®°å½•çš„æ—¶å€™ï¼Œè¿˜è¦è®°å½•æ—¥å¿—çš„ï¼Œæ‰€ä»¥é€Ÿåº¦æ²¡æœ‰TRUNCATE(ä¸ç”Ÿæˆäº‹åŠ¡æ—¥å¿—)å¿«

äº‹åŠ¡æ—¥å¿—åé¢è®²



DML insert update delete

DDL create drop alter



ä¸‹é¢ç»§ç»­å­¦ä¹ DCLå’ŒDQL

![image-20230511095227010](7-sqlå„ç§è¯­å¥2.assets/image-20230511095227010.png)









---

ä¹‹å‰çš„ä¸€ä¸ªç¼–è¯‘æŠ¥é”™ï¼Œç‰ˆæœ¬è¾ƒæ–°çš„åŒ…ï¼Œè§£å†³æ€è·¯å¦‚ä¸‹

![image-20230511095524821](7-sqlå„ç§è¯­å¥2.assets/image-20230511095524821.png)

ä½†æ˜¯rm -f CMakeCache.txtåˆ é™¤åè¦é‡æ–°cmakeå¯èƒ½ã€‚ç„¶åyum install libdb-cxx-develè¦è¡¥ä¸€ä¸ªè¿™ä¸ªåŒ…ã€‚è¦ä¹ˆå°±æ˜¯å’ŒAMDçš„CPUæœ‰å…³å¯¼è‡´çš„ç¼–è¯‘åˆ°åé¢å¤±è´¥äº†ã€‚

![image-20230511095804104](7-sqlå„ç§è¯­å¥2.assets/image-20230511095804104.png)













