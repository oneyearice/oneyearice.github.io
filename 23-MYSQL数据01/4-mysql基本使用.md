# ç¬¬4èŠ‚. mysqlåŸºæœ¬ä½¿ç”¨



![ ](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314134117979.png) 

ç©ºçš„æ„æ€æ˜¯ç”¨æˆ·åéšä¾¿å†™ï¼Œä¸Šå›¾ğŸ‘†æ¡†é”™äº†å“¦ï¼Œuserä¸ºç©ºçš„æ˜¯æœ€åä¸¤è¡Œï¼ŒPUBLICæœ¬èº«å°±æ˜¯ç”¨æˆ·å

![image-20230314134302856](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314134302856.png)

ç©ºç”¨æˆ·è¿›æ¥çš„æƒé™ğŸ‘†



### è¿›è¡Œå®‰å…¨åŠ å›º

![image-20230314140536805](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314140536805.png)

è¿™æ˜¯æˆ‘ä¹‹å‰ç”¨ç›´æ¥yumçš„mariadbï¼Œæ˜¯ç”±å®‰å…¨åŠ å›ºè„šæœ¬çš„

![image-20230314140650127](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314140650127.png) 

ä½†æ˜¯æ–°çš„mariadbç‰ˆæœ¬æ”¹åŠ¨äº†ä¸€ä¸‹ï¼ŒğŸ‘‡

![image-20230314141158447](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314141158447.png)

https://mariadb.com/kb/en/mysql_secure_installation/

ç»“åˆæ–‡ç« ï¼Œçœ‹æ¥è½¯è¿æ¥å°±æ˜¯è¿‡æ¸¡ä¸€ä¸‹ç”¨çš„ï¼Œç°åœ¨çš„æ–°ç‰ˆæœ¬å‘¢éƒ½æ²¡æœ‰mysql_secue_installationè¿™ä¸ªè½¯è¿æ¥æ–‡ä»¶äº†ã€‚

https://mariadb.com/kb/en/authentication-from-mariadb-104/

æ–‡ä¸­è¯´â€œRemember, the best way to keep your password safe is not to have one!â€

æœäº†U~

å›åˆ°è¿™é‡Œå­¦ä¹ çš„å®‰å…¨åŠ å›ºè„šæœ¬ï¼š

![image-20230314142442928](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314142442928.png) 

è·‘ä¸€ä¸‹



10.11ç‰ˆçš„æƒ…å†µ

![image-20230314142819734](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314142819734.png)

![image-20230314142839088](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314142839088.png)

è§†é¢‘ä¸­çš„ä½ç‰ˆæœ¬ğŸ‘‡ï¼Œä¸»è¦åŒºåˆ«æ˜¯swith to unix_socket authenticationå§ï¼Œåæ­£ä¸Šé¢èµ°å®Œrootå¯†ç æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œåº”ä¸ºæœ‰æ’ä»¶è¦æ”¹ä¸€ä¸‹ã€‚emmä¸è¿‡ï¼Œäººå®¶å®˜ç½‘è¯´äº†æ²¡æœ‰å¯†ç å°±æ˜¯æœ€å®‰å…¨çš„å¯†ç ã€‚

![image-20230314142932705](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314142932705.png)

è„šæœ¬åˆ°è¿™é‡Œå·²ç»èµ·ä½œç”¨äº†ï¼Œè¦å¯†ç ç™»å…¥äº†ï¼Œå½“ç„¶æˆ‘è¯´çš„æ˜¯è€ç‰ˆæœ¬

![image-20230314143952743](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314143952743.png)

![image-20230314143818128](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314143818128.png)

è¿™ä¸ªcentos7.localdomainæ˜¯ç¦æ­¢rootè¿œç¨‹ç™»å…¥å¹²æ‰çš„ï¼Œå› ä¸ºå®ƒæ‹…å¿ƒæœ‰äººä½¿ç”¨åŸŸåè§£æå°†cento7.localdomainè§£ææˆè¿œç«¯mysqlçš„IPåœ°å€ï¼Œä»è€Œä½¿ç”¨è¿™ä¸ªhostsè¿›æ¥ã€‚



å›åˆ°æˆ‘çš„æ–°ç‰ˆmariadb

![image-20230314144410834](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314144410834.png)



![image-20230314144541574](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314144541574.png)

å¯†ç å·²ç»æ”¹å¥½äº†ï¼Œå¦‚æœéè¦ä½¿ç”¨rootå¯†ç ç”Ÿæ•ˆï¼Œåˆ™éœ€è¦

https://blog.csdn.net/tiny_du/article/details/123924376

https://www.orcy.net.cn/1410.html

ä¿®æ”¹global_privé‡Œçš„unix_socket

> ALTER USER root@localhost IDENTIFIED VIA mysql_native_password USING PASSWORD("ä½ çš„å¯†ç ");

æ–‡ä¸­çš„è¿™ä¸ªæ–¹æ³•ï¼Œè®°ä¸æ¸…æˆ‘ä¹‹å‰æ˜¯ä¸æ˜¯ç›´æ¥ä¿®æ”¹äº†global_privé‡Œçš„å†…å®¹ã€‚

![image-20230314151429167](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314151429167.png)

```shell
ALTER USER root@localhost IDENTIFIED VIA mysql_native_password USING PASSWORD("xxxxx");
```

ç„¶åå†çœ‹

![image-20230314153302995](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314153302995.png)

![image-20230314153504397](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314153504397.png)

æˆ‘å†æ‰¾æ‰¾æ–‡ç« 

https://blog.whsir.com/post-6795.html

è¿™ä¸ªé è°±ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ç¦ç”¨unix_socket

ä¸è¿‡æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹gloabl_privé‡Œçš„å‚æ•°çš„ï¼Œå¥½åƒæ²¡æœ‰å”‰ï¼ŒğŸ‘‡å®˜ç½‘ä¹Ÿæ˜¯è¿™ä¸ªæ–¹æ³•ï¼š

https://mariadb.com/kb/en/authentication-plugin-unix-socket/



ç„¶å\Gçš„æ’ç‰ˆçœ‹ä¸‹

![image-20230314155306120](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314155306120.png)



-urootä¸å†™ä¹Ÿè¡Œï¼Œé»˜è®¤å°±æ˜¯rootï¼Œä½ æ¢linuxçš„ç”¨æˆ·ï¼Œä¹Ÿä¸€æ ·ï¼ŒPia!(ï½ â€µ-â€²)ãƒâ€(ãƒï¹<ã€‚)

![image-20230314160829888](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314160829888.png) 

ä¸€æ ·ä¸ªæ¯›ğŸ‘‡

![image-20230314161017586](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314161017586.png)

Pia!(ï½ â€µ-â€²)ãƒâ€(ãƒï¹<ã€‚)

![image-20230314161208874](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314161208874.png) 





mysql -uroot -pxxx -h a.b.c.d   è¿™ä¸ªæ˜¯å®Œå…¨å‘½ä»¤

![image-20230314161410352](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314161410352.png) 

æ³¨æ„-h 127.0.0.1å’Œ-h localhostä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯èµ°çš„tcp/ip socketï¼Œåè€…æ˜¯èµ°çš„unix_socketæ–‡ä»¶socket

![image-20230314161717077](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314161717077.png)



![image-20230314161630971](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314161630971.png)

ä¸‹å›¾è™½ç„¶æ˜¯æœ¬åœ°å°±æ˜¯192.168.126.129è‡ªå·±ç™»è‡ªå·±ï¼Œä½†æ˜¯è¿˜æ˜¯åˆ¤å®šä¸ºroot@django001ï¼Œè§£ææˆäº†hostnameæ‰€ä»¥ä¸å¯¹äº†ã€‚

![image-20230314161903110](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314161903110.png)

å°è¯•æ”¹hostä¸º192.168.126.129çœ‹çœ‹ï¼Œæœç„¶è¢«åå‘è§£ææˆäº†hostnameäº†

```mysql
GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.126.129' IDENTIFIED BY 'Cisc0@123' WITH GRANT OPTION;	
```

![image-20230314164635872](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314164635872.png)

ç„¶åå°†192.168.126.129æ”¹æˆhostnameä¹Ÿå°±æ˜¯django001çœ‹çœ‹ï¼Œä¸è¡Œï¼Œå°±æ˜¯IPï¼Œè™½ç„¶æ˜¾ç¤ºçš„æ˜¯root@django001ï¼Œä½†æ˜¯åªæ˜¯åå‘è§£æçš„ç»“æœï¼Œåªè®¤IPã€‚

![image-20230314171243990](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314171243990.png)





æŠ¥é”™çš„æƒ…å†µï¼šupdateä¸è¡Œï¼Ÿ

![image-20230314164857474](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314164857474.png)



![image-20230314165818586](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314165818586.png)



https://stackoverflow.com/questions/64841185/error-1356-hy000-view-mysql-user-references-invalid-tables-or-columns-o

```
ALTER USER root@localhost IDENTIFIED VIA mysql_native_password USING PASSWORD("xxxxx");
æˆ–è€…ä½¿ç”¨SETPASSWORD

```

https://mariadb.com/kb/en/set-password/

## Example

For example, if you had an entry with User and Host column values of '`bob`' and '`%.loc.gov`', you would write the statement like this:

```
SET PASSWORD FOR 'bob'@'%.loc.gov' = PASSWORD('newpass');
```

If you want to delete a password for a user, you would do:

```
SET PASSWORD FOR 'bob'@localhost = PASSWORD("");
```





æŸ¥çœ‹çš„ç»†èŠ‚

![image-20230314172522559](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314172522559.png)

æ–°ç‰ˆæœ¬å°±æ˜¯-serverï¼Œ-clientè¿™ç§

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314172611312.png" alt="image-20230314172611312" style="zoom:60%;" /> 



è€ç‰ˆæœ¬å°±æ˜¯

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314172809902.png" alt="image-20230314172809902" style="zoom:50%;" /> 

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314172828907.png" alt="image-20230314172828907" style="zoom:50%;" /> 

è¿™ä¸ªå°±æ˜¯client





mysql-clienté‡Œçš„mysqldumpå¾ˆå…³é”®

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314173120892.png" alt="image-20230314173120892" style="zoom:50%;" /> 



 

### mysqladminçš„ç”¨æ³•

![image-20230314174240949](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314174240949.png)

-ï¼Ÿç­‰ä»·äº--help

![image-20230314174312496](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314174312496.png)

æ£€æµ‹mysqlæœåŠ¡æ˜¯å¦æ­£å¸¸

![image-20230314174429328](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314174429328.png)

 è¿œç¨‹æµ‹è¯•è¦å¯†ç å’Œç«¯å£ï¼š

![image-20230314175612081](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314175612081.png) 

è¶…æ—¶æ—¶é—´è¦è®¾ç½®ä¸‹çš„

![image-20230314180125738](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314180125738.png)

![image-20230314180324026](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314180324026.png)

å®æµ‹æ˜¯2mçš„è¶…æ—¶æ—¶é—´

è°ƒæ•´æ¢æµ‹æ—¶é—´ä¸Šé™æ–¹æ³•å°±æ˜¯--connect-timeout

https://dev.mysql.com/doc/refman/8.0/en/mysqladmin.html

![image-20230314180735117](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314180735117.png)

ä½†æ˜¯å¯†ç è¦æƒ³åŠæ³•éšè—å¥½ï¼Œå¦åˆ™ç›‘æ§å­˜åœ¨å¯†ç æ³„éœ²é£é™©ã€‚





##### å…³é—­æœåŠ¡ï¼š

![image-20230314175904203](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314175904203.png)

æ•°æ®çš„è¿›ç¨‹ï¼Œä¸€å®šä¸è¦ç”¨killæ¥æ€ï¼Œä¸€å®šä¸è¦ï¼ï¼ï¼ï¼Œæ€å®Œå°±å¯èƒ½èµ·ä¸æ¥äº†ã€‚



##### æ”¹å£ä»¤

![image-20230314181101517](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314181101517.png)

![image-20230314181533280](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314181533280.png)

 

![image-20230314181351245](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314181351245.png) 

ä»¥ä»€ä¹ˆèº«ä»½user@host è¿è¿›å»çš„ï¼Œå°±æ”¹çš„è°çš„å¯†ç ã€‚



##### è¿˜å¯ä»¥ç›´æ¥åˆ›å»ºæ•°æ®åº“

![image-20230314181703811](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314181703811.png)



![image-20230314182005913](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314182005913.png)



##### ä¸è¿›å…¥äº¤äº’å¼çš„cliæ–¹æ³•

```shell
mysql -e "show databases"	
```

![image-20230314182403116](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314182403116.png) 



![image-20230314182948403](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314182948403.png)

mysqlè¿›å…¥æ˜¯äº¤äº’æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æœ‰æ ‡å‡†è¾“å…¥çš„ï¼Œæ‰€ä»¥é‡å®šå‘æ–‡ä»¶å†…å®¹è¿›å»å°±è¡Œäº†

![image-20230314185120520](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185120520.png)

è¡¨æ ¼å¼æ²¡äº†

![image-20230314185238390](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185238390.png)







![image-20230314185515661](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185515661.png)

![image-20230314185544748](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185544748.png)

mysqld_safe æ˜¯mysqldçš„çˆ¶è¿›ç¨‹ï¼Œä¸Šå›¾æ˜¯é€šè¿‡ps auxfçœ‹çš„

![image-20230314185911485](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185911485.png)

pstree -på¯è§

![image-20230314185946981](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185946981.png)



æ–°ç‰ˆæœ¬æ²¡æœ‰è¿™ä¸ªsafeçˆ¶è¿›ç¨‹äº†

![image-20230314185738866](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314185738866.png)



è¿›ç¨‹æ˜¯ä»¥mysqlè¿™ä¸ªç”¨æˆ·è¿è¡Œçš„ã€‚

è€Œè¯¥ç”¨æˆ·æ˜¯å®‰è£…ç¨‹åºçš„æ—¶å€™è„šæœ¬åˆ›å»ºçš„ã€‚

![image-20230314190640815](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314190640815.png)

![image-20230314190412995](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314190412995.png)



åé¢æºç ç¼–è¯‘ï¼ŒäºŒè¿›åˆ¶å®‰è£…çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºç”¨æˆ·

#### å¤šå®ä¾‹ï¼Œä¹Ÿå¯ä»¥åŒä¸€ä¸ªç‰ˆæœ¬æ¥åš

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314191007434.png" alt="image-20230314191007434" style="zoom:50%;" /> rpm -ql MariaDB-serverå¯è§

ç«¯å£é”™å¼€ï¼Œç”¨æˆ·é€æ˜ï¼Œæµ‹è¯•ç¯å¢ƒç”¨







### ç”¨æˆ·è´¦å·

![image-20230314191725785](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314191725785.png)

_å°±æ˜¯ç­‰ä»·äºregexé‡Œçš„?ï¼Œå¯èƒ½å§

ç–‘é—®ï¼š172.16.%.%ï¼Œ%åŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦ï¼Œé‚£ä¸ºå•¥ä¸å†™æˆ172.16.%











![image-20230314192246377](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192246377.png)



![image-20230314192234857](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192234857.png)



![image-20230314192448853](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192448853.png)



![image-20230314192426086](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192426086.png)





### ä¿®æ”¹mysqläº¤äº’æ¨¡å¼çš„æç¤ºç¬¦

manæ‰‹å†Œé‡Œçœ‹

![image-20230314192650555](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192650555.png)

![image-20230314192718294](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192718294.png)

![image-20230314192745042](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192745042.png)

![image-20230314192831766](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192831766.png)



![image-20230314192940298](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314192940298.png)



![image-20230314193048168](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314193048168.png)

è¿›åˆ°/etc/my.conf.dä¸‹é¢ï¼Œå¯ä»¥çœ‹åˆ°client.cnfå’Œmysql-clients.confç­‰æ–‡ä»¶

æ‰“å¼€mysql-clients.confè¿›è¡Œç¼–è¾‘

![image-20230314193331880](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314193331880.png)

ç”Ÿæ•ˆğŸ‘‡

![image-20230314193350538](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314193350538.png)





![image-20230314193532391](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314193532391.png)

æ•°æ®åº“çš„è·¯å¾„ï¼Œå¯ä»¥æ”¹æˆLVMé‡Œï¼Œä¼˜ç‚¹å°±æ˜¯å¯ä»¥ä¼¸ç¼©ç©ºé—´ã€‚

ä¸Šå›¾è¿˜æœ‰socketæ–‡ä»¶çš„è·¯å¾„ï¼Œå°±æ˜¯mysql -uroot -pxxx å›è½¦èµ°çš„æ–‡ä»¶socket

![image-20230314195453405](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195453405.png)





<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314193942323.png" alt="image-20230314193942323" style="zoom:50%;" /> 

è¿™æ˜¯æ—¥å¿—ï¼Œè¿›ç¨‹IDæ–‡ä»¶



![image-20230314194233377](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314194233377.png)



### è‡ªåŠ¨è¡¥é½

![image-20230314194207368](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314194207368.png)



çœ‹åˆ°æ²¡æœ‰å¸¦ä»»ä½•é»˜è®¤å€¼ğŸ‘‡

![image-20230314194456506](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314194456506.png)



ä¿®æ”¹ä¸€ä¸ªé€‰é¡¹ï¼Œç„¶åçœ‹ä¸‹

![image-20230314194637278](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314194637278.png)



![image-20230314194832380](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314194832380.png)

è¯´æ˜è¿˜æ˜¯å¯ä»¥è¡¥çš„ï¼Œå¥½å§ï¼Œ

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195013378.png" alt="image-20230314195013378" style="zoom:50%;" /> 



![image-20230314195338027](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195338027.png)





å¦‚æœæºç å®‰è£…ï¼Œå°†æ¥ä¸Šæ–‡æåˆ°çš„è·¯å¾„ï¼Œå°±éœ€è¦è‡ªå·±å®šä¹‰äº†ï¼ŒåŒ…æ‹¬

1ã€socketè·¯å¾„

2ã€æ•°æ®åº“è·¯å¾„

3ã€logæ—¥å¿—è·¯å¾„

ç­‰



##### ç›´æ¥è¿è¿›æ•°æ®åº“

![image-20230314195806366](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195806366.png) 

-D å¯çœç•¥

![image-20230314195838877](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195838877.png)



-C å‹ç¼©å¯èŠ‚çœå¸¦å®½

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195911236.png" alt="image-20230314195911236" style="zoom:80%;" /> 

-e ä¸Šæ–‡è®²è¿‡äº†

-V ç‰ˆæœ¬

-v æ˜ç»†

![image-20230314195936932](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314195936932.png)









![image-20230314200008497](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200008497.png)



ä¸Šæ–‡ä¹Ÿåšä¸ªå®éªŒäº†ï¼Œ127.0.0.1ä¸æ˜¯èµ°çš„unix sockè€Œæ˜¯èµ°çš„TCP/IP







##### æŸ¥çœ‹å½“å‰ç”¨æˆ·ğŸ‘‡

![image-20230314200237299](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200237299.png)





##### æŸ¥çœ‹å½“å‰ç‰ˆæœ¬

æ³¨æ„å“¦ï¼Œæˆ‘è¿™æ˜¯è‡ªå·±çš„10.11å’Œè§†é¢‘çš„5.5æ··ç€æˆªå›¾äº†ï¼Œæ„æ€åˆ°äº†å°±è¡Œ

![image-20230314200415679](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200415679.png)





### å¤§å°å†™-åº“åã€è¡¨ååŒºåˆ†å¤§å°å†™ï¼Œå‘½ä»¤å’Œå­—æ®µä¸åŒºåˆ†å¤§å°å†™



##### å‘½ä»¤ä¸åŒºåˆ†å¤§å°å†™

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200513818.png" alt="image-20230314200513818" style="zoom:50%;" /> 



##### æ•°æ®åç§°åŒºåˆ†å¤§å°å†™

<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200545807.png" alt="image-20230314200545807" style="zoom:50%;" /> 



##### è¡¨åå¤§å°å†™æ•æ„Ÿ

##### ![image-20230314200651456](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200651456.png)



##### è¡¨é‡Œå­—æ®µä¹Ÿå°±æ˜¯åˆ—å±æ€§ä¸åŒºåˆ†å¤§å°å†™ 

![image-20230314200814454](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314200814454.png) 

æ¨èSELECTè¿™ç§å‘½ä»¤ä¹Ÿæ˜¯å¤§å†™



##### åˆ åº“çš„æ–¹å¼åˆå¢åŠ äº†

![image-20230314203014630](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314203014630.png)







### é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥åˆåœ¨ä¸€èµ·

é€šè¿‡åç§°åŒºåˆ†

![image-20230314203323429](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314203323429.png) 

è¿™äº›é…ç½®å†…å®¹çš„æ ¼å¼å°±æ˜¯ä¸Šå›¾è¯´çš„

parameter = value

è€Œvalueçš„å¯ç”¨å’Œç¦ç”¨ï¼Œåˆå¯ä»¥æœ‰1 ON TRUEç­‰å†™æ³•å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚

å¦‚æœé…ç½®æ–‡ä»¶é‡Œæ˜¯ä¸åŒºåˆ†_å’Œ-çš„

![image-20230314203659023](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314203659023.png) 



##### é…ç½®æ–‡ä»¶è·¯å¾„

![image-20230314203748835](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314203748835.png) 

ä¼˜å…ˆçº§ä¸Šå›¾çš„ä»ä¸Šå¾€ä¸‹ï¼Œä½†æ˜¯ä¸åŒçš„å®‰è£…æ–¹å¼ï¼Œä¼˜å…ˆçº§çš„ç»“è®ºä¸åŒ

ä¸è¦å¯ä»¥è®°è¿™äº›ï¼Œå°±æ˜¯å®é™…ä½¿ç”¨ï¼Œé…ç½®æ–‡ä»¶å°±æ”¾ä¸€ä¸ªåœ°æ–¹ï¼Œé¿å…æ··æ·†ã€‚





#### ç»´æŠ¤æ¨¡å¼

![image-20230314203956708](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314203956708.png) 

ä¸Šå›¾=1å¯ä»¥çœç•¥ä¸å†™ï¼Œå°±æ˜¯=1äº†

skip-networking=1å°±å…³é—­äº†3306ï¼Œç›¸å½“äºç»´æŠ¤æ¨¡å¼ï¼Œå¤–ç•Œå°±è¿ä¸è¿›æ¥äº†ã€‚



vim /etc/my.conf

![image-20230314204221530](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204221530.png) 

![image-20230314204242911](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204242911.png)

å†çœ‹ä¸‹ç«¯å£å·å°±ä¸åœ¨äº†

![image-20230314204304435](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204304435.png)

ä½†æ˜¯è‡ªå·±å¯ä»¥è¿

![image-20230314204321728](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204321728.png)

å› ä¸ºèµ°çš„æ˜¯unix_socket

![image-20230314204344349](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204344349.png)



##### é…ä¸€ä¸ªé…ç½®æ–‡ä»¶è·¯å¾„

![image-20230314204410009](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204410009.png)

/etc/mysqlè¿™ä¸ªè·¯åŠ²æ˜¯é»˜è®¤æ²¡æœ‰çš„ï¼Œæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª

![image-20230314204443408](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204443408.png) 

![image-20230314204501710](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204501710.png) 

å’Œåˆšæ‰çš„é…ç½®ç›¸åäº†

é‡å¯æœåŠ¡çœ‹ä¸‹

![image-20230314204525161](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204525161.png)

è¯´æ˜/etc/my.cnfæ˜¯ä¼˜äº/etc/mysql/my.cnfçš„







### äºŒè¿›åˆ¶å®‰è£…

![image-20230314204744080](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204744080.png)

äºŒè¿›åˆ¶å®‰è£…ï¼Œé…ç½®æ–‡ä»¶/etcä¸‹çš„XXã€ç”¨æˆ·è´¦å·ã€DBæ–‡ä»¶ éƒ½æ²¡æœ‰



![image-20230314204859966](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314204859966.png)

æŒ‡å®šäº†å®¶ç›®å½•ï¼Œå°±æ˜¯ç”¨æ¥æ”¾DBæ–‡ä»¶çš„ï¼Œè€Œ/dataå°†æ¥æ¨èåšæˆLVM

åŒæ ·çš„æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„å‚è€ƒåŸæ¥çš„DBæ–‡ä»¶è®¾ç½®ä¸‹

![image-20230314205037791](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205037791.png)





![image-20230314205307798](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205307798.png) 



![image-20230314205251335](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205251335.png) 

æ–‡ä»¶åæœ‰linuxå­—æ ·çš„çš„å°±æ˜¯äºŒè¿›åˆ¶çš„åŒ…ï¼Œå¤§å°ä¹Ÿä¸ä¸€æ ·ï¼ŒäºŒè¿›åˆ¶çš„ç¼–è¯‘åçš„è‚¯å®šå¤§å¾ˆå¤šã€‚



##### æ³¨æ„ï¼Œæœ‰ä¸ªå®‰è£…è·¯å¾„æ˜¯å›ºå®šçš„ï¼Œäººå®¶ç¼–è¯‘æˆäºŒè¿›åˆ¶çš„æ—¶å€™å°±å†™æ­»äº†

![image-20230314205411284](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205411284.png) 

/usr/localè¦æ‰‹åŠ¨è¡¥ä¸Šçš„ï¼Œå½“åˆäººå®¶configure ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šçš„ç±»è·¯å¾„ã€‚<img src="4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205550655.png" alt="image-20230314205550655" style="zoom:30%;" />  

**/usr/local/mysql**å°±æ˜¯å½“åˆäººå®¶ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šçš„è·¯å¾„

è¿™é‡Œå°±æ˜¯ä¸€äº›mysqlçš„ç¨‹åº



#### é…ç½®æ–‡ä»¶

![image-20230314205831836](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205831836.png)



![image-20230314205944787](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314205944787.png)

äºŒè¿›åˆ¶å®‰è£…åæœ‰ä¸€ä¸ªæ¨¡æ¿my-large.cnfå¤åˆ¶è¿‡æ¥ç”¨ï¼Œç„¶åä¸ºäº†ä¸å’Œ/etc/my.cnfå†²çªï¼Œå°±å¦èµ·ç‚‰ç¶æ”¾åˆ°æ–°å»ºçš„/etc/mysqlæ–‡ä»¶å¤¹ä¸‹

![image-20230314210101278](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210101278.png)



è¿™å°±æ˜¯è®¡åˆ’æ•°æ®çš„è·¯å¾„ï¼Œä¸‹ä¸¤è¡Œå†è¯´æ˜¯ä¼˜åŒ–çš„



![image-20230314210153486](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210153486.png) 

äºŒè¿›åˆ¶å®‰è£…åDBæ–‡ä»¶æ—¶ç©ºçš„ï¼Œéœ€è¦ç”Ÿæˆå‡ºæ¥ï¼Œmysqlã€testã€performance_schemeè¿™äº›

yumå®‰è£…å…¶å®ä¹Ÿæ˜¯ä¾èµ–è¿™ä¸ªè„šæœ¬ç”Ÿæˆçš„



![image-20230314210336350](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210336350.png) 

centos7ä¸Šä¹Ÿèƒ½ç”¨è¿™ä¸ªservice xxx startï¼Œå¯ä»¥å‚è€ƒç°åœ¨çš„åšæˆsystemctl start xxxçš„serviceæ–‡ä»¶ã€‚yumå®‰è£…çš„mysqlé‡Œserviceæ–‡ä»¶å†™æ³•çœ‹çœ‹ã€‚



##### PATHå˜é‡![image-20230314210512561](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210512561.png)



##### åˆå§‹åŒ–

![image-20230314210536985](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210536985.png) 











### æºç åŒ…ç¼–è¯‘å®‰è£…

å’ŒäºŒè¿›åˆ¶å·®åˆ«ä¸å¤§ï¼Œå°±æ˜¯å¤šä¸€æ­¥ç¼–è¯‘

![image-20230314210642706](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210642706.png) 

tarè§£å‹

cmakeç¼–è¯‘å®‰è£…ï¼Œä»¥å‰æˆ‘ä»¬éƒ½æ˜¯ç”¨configureæ¥å¼„ï¼Œè¿™é‡Œæ¨èç”¨cmakeï¼ŒåŸæ¥çš„configure make makeinstallä¹Ÿèƒ½ç”¨ï¼Œä¸æ¨è

![image-20230314210834843](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314210834843.png) 

æ”¯æŒå¾ˆå¤šå­˜å‚¨å¼•æ“ï¼Œä¸ä»£è¡¨å°±ç”¨å¾—åˆ°ã€‚



![image-20230314211122053](4-mysqlåŸºæœ¬ä½¿ç”¨.assets/image-20230314211122053.png)











