# ç¬¬6èŠ‚ Dockeré•œåƒæœç´¢å’Œä¸‹è½½



# é•œåƒç®¡ç†



æ¯”å¦‚ä»ç½‘ä¸Šä¸‹è½½äº†åŸºç¡€é•œåƒï¼Œç„¶ååœ¨ä¸Šé¢å°è£…äº†ä¸€äº›ç½‘ç»œæ£€æµ‹å·¥å…·ï¼Œ

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408093932755.png" alt="image-20240408093932755" style="zoom:50%;" />



ç„¶åç»§ç»­å°è£…jdkï¼Œtomcatï¼Œæœ€åè·‘å®¹å™¨å°±æ˜¯åˆæ·»åŠ äº†ä¸€å±‚å¯å†™å±‚ï¼Œè€Œå¯å†™å®¹å™¨å±‚å¾€ä¸‹éƒ½æ˜¯é•œåƒå±‚æ˜¯åªè¯»çš„ã€‚

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408094218199.png" alt="image-20240408094218199" style="zoom:50%;" />



æœªæ¥æ‰“é•œåƒå°±æ˜¯é‡‡ç”¨è¿™ç§é€»è¾‘ä¸æ–­åœ°æ‰“ï¼Œæœ€ç»ˆçœ‹åˆ°çš„é•œåƒå…¶å®æ˜¯å¤šä¸ªé•œåƒç´¯ç§¯èµ·æ¥çš„ç»“æœã€‚æœ‰ç‚¹åƒmysqlçš„å¢é‡å¤‡ä»½ï¼Œæ¯æ¬¡å¢é‡å¤‡ä»½ä¸€ç‚¹ç‚¹ï¼Œæœ€ç»ˆç´¯åŠ èµ·æ¥çš„æ‰æ˜¯å®Œæ•´çš„æ•°æ®ã€‚



åˆ†å±‚æ„å»ºï¼Œå°†æ¥æ¯ä¸€éƒ¨åˆ† éƒ½å¯ä»¥ç‹¬ç«‹æŠ½å–å‡ºæ¥ï¼Œç”¨æ¥æ„å»ºå…¶ä»–é•œåƒï¼Œä¹Ÿå°±æ˜¯è¯´é•œåƒå±‚æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œæ­£ä»¥ä¸ºåˆ†å±‚æ‰€ä»¥å¤ç”¨èµ·æ¥å¾ˆä¸æ»‘ã€‚



æ ¹é•œåƒã€çˆ¶é•œåƒã€å­é•œåƒã€å­å­é•œåƒï¼Œå¤§æ¦‚æœ‰äººä¼šè¿™ä¹ˆç§°å‘¼

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408095550089.png" alt="image-20240408095550089" style="zoom:50%;" />



![image-20240408095725657](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408095725657.png)



è¿™ä¸ªæ¯ä¸€å±‚çš„å°†æ¥å¤ç”¨ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è”åˆæ–‡ä»¶ç³»ç»Ÿ è‡ªå·±å»å¤ç”¨å•Šï¼Œæˆ‘æ„Ÿè§‰åº”è¯¥æ˜¯dockerè‡ªèº«èƒ½å¤Ÿå¤ç”¨æ‰è¡Œå•Šã€‚è€Œä¸æ˜¯ç”¨æˆ·æ‰‹åŠ¨å»å¤ç”¨ï¼Œç”¨æˆ·æ²¡åŠæ³•è¯´å»å¤ç”¨å“ªä¸€å±‚å§ï¼Œæ²¡è¿™ä¸ªæ“ä½œçš„ç©ºé—´å•Šã€‚



<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408100554285.png" alt="image-20240408100554285" style="zoom:50%;" />





é€šè¿‡docker image history nginxæŸ¥çœ‹äººå®¶æ˜¯æ€ä¹ˆæ„å»ºæ¯ä¸€å±‚çš„

![image-20240408101235237](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408101235237.png)



é•œåƒæœ‰äº†ï¼Œåˆ›å»ºå¥½äº†ï¼Œæ‹‰å¥½äº†ï¼Œè½åœ¨æœ¬åœ°å…¶å®éƒ½æ˜¯è¡¨ç°ä¸ºä¸€ä¸ªä¸ªæ–‡ä»¶å¤¹çš„

![image-20240408101919729](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408101919729.png)



æœ€å¤§çš„æ–‡ä»¶å¤¹å°±æ˜¯overlay2ï¼Œé‡Œé¢çš„ä¸œè¥¿å…¶å®å°±æ˜¯å¾ˆå¤šå±‚ï¼Œoverlayå°±æ˜¯å±‚çš„æ„æ€ï¼Œæ˜¯æ‰€æœ‰imagesçš„å±‚çº§é“ºå¼€æ¥çš„ï¼Œæ‰èƒ½å…±ç”¨ï¼Œå¤ç”¨ã€‚è¿™å°±æ˜¯æ‰€è°“çš„è”åˆæ–‡ä»¶ç³»ç»Ÿé‡Œçš„overlay2è¿™ç§ã€‚

![image-20240408134242272](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408134242272.png)

åˆ é™¤å®¹å™¨å

![image-20240408135105604](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408135105604.png)

åˆ é™¤å®¹å™¨åï¼Œå‘ç°è¿™äº›åˆ†å±‚çš„ä¸œè¥¿å°±å°‘äº†å¾ˆå¤šğŸ‘‡

![image-20240408135127082](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408135127082.png)

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408141122357.png" alt="image-20240408141122357" style="zoom:50%;" />

docker rmåˆ é™¤å®¹å™¨å’Œé•œåƒğŸ‘†

è¿›ä¸€æ­¥å†åˆ é™¤é•œåƒï¼Œåå‘ç°overlay2é‡Œå°±ç©ºäº†

![image-20240408141639847](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408141639847.png)

ä¹Ÿå°±æ˜¯è¯´å®¹å™¨å’Œé•œåƒåˆ å…‰äº†ï¼Œoverlay2æ–‡ä»¶å¤¹é‡Œå°±ç©ºäº†ï¼Œç°åœ¨pullä¸€ä¸ªnginxçœ‹çœ‹

![image-20240408142343942](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408142343942.png)

overlay2æ–‡ä»¶å¤¹é‡Œçš„å°±æ˜¯åˆ†å±‚çš„æ•°æ®äº†ğŸ‘†ã€‚ä¸€ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€å±‚ä½†æˆ‘æ²¡ä»”ç»†æ•°å“¦ï¼Œå“ˆå“ˆï¼Œå¤§æ¦‚å¦‚æ­¤å§



# é•œåƒå»å“ªæ‰¾

1ã€hub.docker.com

è¦ç”¨å®˜æ–¹çš„é•œåƒ

![image-20240408150112585](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408150112585.png)

![image-20240408150128977](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408150128977.png)



2ã€cliï¼Œå‘½ä»¤è¡Œæœç´¢çš„æ–¹å¼ä¸å…¨ï¼Œæ²¡æœ‰ä¸Šé¢å»ç½‘ç«™æœç´¢çš„æ–¹å¼å¥½ï¼Œå°±æ˜¯å»hub.docker.comè¿˜æœ‰å…¶ä»–çš„æ¯”å¦‚è°·æ­Œçš„ç«™ç‚¹ã€‚

![image-20240408150236517](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408150236517.png)

è‡ªå·±åšçš„é•œåƒä¹Ÿå¯ä»¥ä¸Šä¼ ä¸Šå»ï¼Œåªæ˜¯åˆ«äººä¸€èˆ¬æ˜¯ä¸æ•¢ç”¨çš„ã€‚

è¿˜æœ‰æ¯”å¦‚k8sçš„ä¸€äº›é•œåƒï¼Œk8så°±æ˜¯è°·æ­Œå¼€å‘çš„ï¼Œå¯¹äºè°·æ­Œæ¥è®²ï¼Œdockerå…¬å¸è‚¯å®šæ²¡æœ‰ä»–ä»¬å®¶çš„å¤§ï¼Œæ‰€ä»¥è°·æ­Œçš„é•œåƒä¹Ÿå°±æ²¡æœ‰æ”¾åˆ°dockerçš„ä»“åº“é‡Œï¼Œè€Œæ˜¯è°·æ­Œè‡ªå·±çš„ä»“åº“é‡Œçš„ã€‚

æ¯”å¦‚ä¸‹å›¾çš„è¿™äº›å¾ˆå¤šå°±æ˜¯è°·æ­Œçš„ï¼Œä½†æ˜¯dockerä¸Šä¹Ÿæœ‰ï¼Œå°±æ˜¯åˆ«äººä¸Šä¼ çš„æ–¹ä¾¿ä¸‹è½½çš„

![image-20240408151447682](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408151447682.png)



3ã€ä»£ç†çš„é…ç½®æ–¹æ³•

å…¶å®å°±æ˜¯ç§‘å­¦ä¸Šç½‘å’¯

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408152824946.png" alt="image-20240408152824946" style="zoom:55%;" />

ä¸Šå›¾å°±æ˜¯é…ç½®ä½ çš„ä»£ç†æœºå™¨ï¼Œèµ°ä»£ç†çš„æ„æ€ï¼Œå¯æƒœæ˜¯é”™è¯¯çš„ğŸ‘†å®æµ‹è¿™æ ·é…ç½®æœåŠ¡éƒ½èµ·ä¸æ¥ï¼Œå…¶å®ä½ å®Œå…¨å¯ä»¥åšåœ¨è·¯ç”±å™¨ä¸Šï¼Œå°±ä¸ç”¨ç®¡è¿™é‡Œçš„æ€ä¹ˆé…ç½®ã€‚

ä¸è¿‡è¿™é‡Œçš„é…ç½®æ–¹å¼ä¹Ÿè¦çŸ¥é“ï¼Œæ–¹æ³•è¶Šå¤šï¼Œåº”ç”¨èµ·æ¥å°±è¶Šçµæ´»ã€‚



è®¾ç½®é…ç½®æ–‡ä»¶é‡Œçš„é…ç½®ï¼Œè¿˜æœ‰ä¸€ä¸ªè„šæœ¬æ˜¯ä¿®æ”¹ç³»ç»Ÿå±‚é¢çš„ä»£ç†ï¼ŒåŒæ ·ä¹Ÿä¼šè¢«dockerè¯»è¿›å»çš„ğŸ‘‡

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408154822122.png" alt="image-20240408154822122" style="zoom:50%;" />



ä»¥ä¸Šæ˜¯éƒ¨åˆ†å’¯ï¼Œä¿®æ”¹ä»£ç†çš„æ–¹æ³•ï¼Œä¸‰é€‰ä¸€å°±è¡Œäº†ğŸ‘‡å‚è€ƒhttps://blog.csdn.net/peng2hui1314/article/details/124267333

æ€»ç»“å¦‚ä¸‹ï¼š

1ã€ç½‘ç»œé‡Œçš„**è·¯ç”±å™¨å±‚é¢**ç›´æ¥åšè·¯ç”±ï¼Œç•¥



2ã€**ä¸»æœºå±‚é¢**ï¼Œçš„ç³»ç»Ÿä»£ç†

![image-20240408161503948](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408161503948.png)



3ã€**dockeræœåŠ¡å±‚é¢**çš„ä»£ç†ï¼Œå°±æ˜¯ä¸Šé¢çš„è„šæœ¬ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æœåŠ¡æ–‡ä»¶é‡Œçš„ä¸‰è¡Œå†…å®¹ï¼Œå…¶ä»–éƒ½æ˜¯é…å¥—è¯­å¥å‘µå‘µğŸ‘‡

![image-20240408162836631](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408162836631.png)



**4ã€å®¹å™¨é‡Œé¢ï¼Œ**

![image-20240408161945908](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408161945908.png)



5ã€å¯æƒœdaemon.jsonè¿™ä¸ªæ–‡ä»¶çš„é…ç½®æˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸Šå›¾å›¾ç¤ºçš„é…ç½®æˆåŠŸçš„æ¡ˆä¾‹ï¼Œä¹Ÿè®¸æ˜¯è€ç‰ˆæœ¬çš„é…ç½®ï¼Œç±»ä¼¼hostsäº†å§ï¼Œä¸ç®¡äº†ã€‚   ä¸è¿‡å®¹å™¨é‡Œçš„é…ç½®å€’æ˜¯å’Œç¬¬3ç‚¹-å®¹å™¨é‡Œçš„é…ç½®ä¸€æ ·çš„ï¼Œå“ˆå“ˆã€‚





# é•œåƒåˆ¶ä½œ

æ¯”å¦‚javaç¨‹åºéœ€è¦ä¸€ä¸ªé•œåƒï¼Œè¦åšjavaé•œåƒï¼Œ

ç„¶åjavaåˆä¾é JDKï¼Œåˆè¦åšJDKå±‚å¯¹å§

ç„¶åJDKåˆä¾èµ–linuxï¼Œåˆè¦åšlinuxå±‚ï¼Œ

ä¸€èˆ¬æ¥è®²ï¼Œæ˜¯ç³»ç»Ÿé•œåƒå°±ä»å®˜æ–¹æ‹‰å–(ç³»ç»Ÿé•œåƒå‰é¢çš„æ–‡ç« ä¹Ÿè§£é‡Šè¿‡äº†ï¼Œå…¶å®æ˜¯æ²¡æœ‰å†…æ ¸çš„ç”¨æˆ·ç©ºé—´çš„éƒ¨åˆ†)ï¼Œè€Œä¸šåŠ¡é•œåƒæ‰æ˜¯è‡ªå·±åˆ¶ä½œã€‚

![image-20240408164100095](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408164100095.png)



è¿™å°±å›ç­”äº†ä¸‹å›¾ğŸ‘‡çš„é—®é¢˜ï¼Œç”¨æˆ·ç©ºé—´é‡Œæ˜¯æœ‰osçš„ï¼Œåªæœ‰osçš„ä¸€éƒ¨åˆ†ï¼Œç„¶åå†ç»“åˆä¸‹å±‚å®¿ä¸»çš„osçš„å†…æ ¸ å°±èƒ½æ„æˆå®Œæ•´çš„osäº†ã€‚ä»¥æ­¤æ¥æä¾›æœåŠ¡çš„ã€‚

![image-20240408164330074](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408164330074.png)







ç„¶ådockeråˆ¶ä½œé•œåƒçš„æ—¶å€™ï¼Œåº•å±‚ä¸æ˜¯è¦linuxå˜›ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šé€‰æ‹©ubuntuï¼Œcentosã€rockyã€redhatéƒ½ä¸ä¼šï¼Œå› ä¸ºéƒ½å¤ªå¤§äº†ï¼Œå‹ç¼©åè¿˜è¦25MB

![image-20240408164809117](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408164809117.png)



![image-20240408164832512](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408164832512.png)



éƒ½å¤ªå¤§äº†ï¼Œæ‰€ä»¥ä¼šé€‰æ‹©ä¸€äº›ç§¯æç²¾ç®€çš„linxuï¼Œæ¯”å¦‚aphineæˆ–busyboxğŸ‘‡

![image-20240408165011412](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408165011412.png)





![image-20240408165111182](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408165111182.png)



alpineå°±æ˜¯åŸºäºbusyboxå¼€å‘çš„



## ç”Ÿäº§ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„alpine

1ã€åŒ…å®‰è£…å·¥å…·

2ã€alpineçš„ä»“åº“é…ç½®

3ã€ç”¨æ³•ä¹Ÿä¸ä¸€æ ·



ubuntuçš„ä»“åº“æ–‡ä»¶

![image-20240408173623224](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408173623224.png)



alpineæ˜¯ä¸åŒçš„

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408174130320.png" alt="image-20240408174130320" style="zoom:67%;" />

ustcæ˜¯ä¸­ç§‘å¤§çš„



alpineä¹Ÿæ˜¯æœ‰å®Œå…¨é•œåƒå’Œæç®€é•œåƒçš„ï¼Œå¥½æ¯”centosçš„all-in-oneå’Œminiä¸€æ ·ğŸ‘‡

![image-20240408181837435](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408181837435.png)





![image-20240408183923431](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240408183923431.png)





æŒ‡å®šç‰ˆæœ¬ä¸‹è½½ï¼Œè¦å»ç½‘ç«™çœ‹çœ‹ç‰ˆæœ¬çš„æ ¼å¼

![image-20240409132940645](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409132940645.png)

ç„¶åå†å¤åˆ¶ï¼Œç²˜è´´å°±è¡Œäº†

![image-20240409133022555](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409133022555.png)

ç„¶åç½‘ç«™ä¸Šçœ‹åˆ°çš„é•œåƒæ˜¯å‹ç¼©åçš„ï¼Œpullä¸‹æ¥ä¼šå˜å¤§å°±æ˜¯è§£å‹äº†åº”è¯¥ğŸ‘†



### cli ç”¨æ³•  åªæ˜¾ç¤ºé•œåƒidï¼šdocker images -q   # æ“ä½œé•œåƒé IDæ˜¯ä¸å¥½è¯†åˆ«

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409133914202.png" alt="image-20240409133914202" style="zoom:50%;" /> 



æ‰¹é‡åˆ é™¤å°±å¾ˆæ–¹ä¾¿ xargs -i å°±è¡Œäº†ï¼›æˆ–è€…ç›´æ¥docker rmi \`docker images -q\`

![image-20240409135506997](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409135506997.png)





### cliç”¨æ³•ï¼Œæ˜¾ç¤ºé•œåƒå’Œtagï¼š docker image ls --format   # æ“ä½œé•œåƒé åç§°å’Œtagï¼Œä¹Ÿå¯ä»¥è¯†åˆ«

![image-20240409134322669](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409134322669.png)



![image-20240409135240371](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409135240371.png)

åˆ é™¤ä¹Ÿè¦åŠ ä¸Štagçš„ï¼Œå¦åˆ™å°±æ˜¯åˆ é™¤å°±æ˜¯åˆ é™¤latestè¿™ä¸ªtag

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409135320973.png" alt="image-20240409135320973" style="zoom:50%;" /> 





### å®¹å™¨è·‘ç€çš„æ—¶å€™åˆ é™¤imageï¼Œä¸ä¼šçœŸçš„åˆ æ‰



![image-20240409140224451](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409140224451.png)

è¢«å ç”¨çš„é•œåƒå¦‚æœä½¿ç”¨docker rmi -f 'IMAGE ID'  è¿™ç§æ–¹å¼ delete è‚¯å®šå’Œå†™ image name tagä¸ä¼šdeleteï¼Œè€Œä¸” è¿untagåŠ¨ä½œéƒ½ä¸ä¼šæ‰§è¡Œã€‚



ä¸šåŠ¡ä¹Ÿok

![image-20240409140236335](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409140236335.png)

æ­¤æ—¶å³ä½¿åœæ‰å®¹å™¨ï¼Œåˆ æ‰å®¹å™¨ï¼Œé‚£ä¸ªé•œåƒä¹Ÿä¸ä¼šè‡ªåŠ¨åˆ æ‰ï¼Œå°±æˆä¸ºäº†ä¸€ä¸ªæ— åçš„é•œåƒï¼Œä¹Ÿå«danglingé•œåƒ

![image-20240409140418121](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409140418121.png)

åªæŸ¥çœ‹è¿™ç§danglingé•œåƒçš„æ–¹æ³•ï¼Œdocker images -f å°±æ˜¯filterè¿‡æ»¤å‡ºæ¥å“ªäº›ç‰¹å¾çš„images

![image-20240409141939861](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409141939861.png)

åˆ é™¤è¿™ç§å°±è¿™æ ·docker rmi -f $(docker images -f dangling=true -q)     # å°±è¡Œå•¦

æˆ–è€…docker images -f dangling=true -q |xargs docker rmi -f     # ä¹Ÿè¡Œ

![image-20240409143211992](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409143211992.png)

ä¸è¿‡è¦åœæ‰å ç”¨è¯¥é•œåƒçš„å®¹å™¨ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šåˆ ä¸æ‰ğŸ‘†



### ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ¸…ç†çš„å‘½ä»¤docker system 

![image-20240409140817817](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409140817817.png)

è¿™æ ·ä¸ä»…ä»…æ˜¯æ²¡æœ‰ç”¨çš„imagesï¼Œå…¶ä»–çš„åœæ‰çš„å®¹å™¨å’Œæ²¡ç”¨çš„ç½‘ç»œï¼Œç¼“å­˜éƒ½æ¸…äº†

![image-20240409140931115](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409140931115.png)



![image-20240409141113725](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409141113725.png)

æœ‰äº›å®¹å™¨åœäº†ï¼Œä½†æ˜¯ä¸æ˜¯è¯´å°±å¯ä»¥åˆ çš„ï¼Œä½ å°±ä¸èƒ½ç”¨è¿™ä¸ªå‘½ä»¤äº†ï¼æ‰€ä»¥è¿™ä¸ªpruneè¿˜æ˜¯æ…ç”¨ï¼





### inpsectæ˜¯é€šç”¨å‹å‘½ä»¤

![image-20240409164325795](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409164325795.png)



![image-20240409165437840](6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409165437840.png)

ä¸Šå›¾çš„é—®é¢˜å°±æ˜¯ï¼Œimagesé‡Œçœ‹åˆ°çš„containeråº”è¯¥å°±æ˜¯å½“åˆè¿™ä¸ªé•œåƒæ˜¯é€šè¿‡å®¹å™¨commitå‡ºæ¥çš„ï¼Œæ‰€ä»¥ä¼šå¸¦ä¸Šå®¹å™¨å­—çœ¼ğŸ‘‡

<img src="6-Dockeré•œåƒæœç´¢å’Œä¸‹è½½.assets/image-20240409172720830.png" alt="image-20240409172720830" style="zoom:45%;" />





ç„¶åè¯¦æƒ…å¦‚ä¸‹

```shell
[root@nginxproxy ~]# docker inspect 05455a08881e
[
    {
        "Id": "sha256:05455a08881ea9cf0e752bc48e61bbd71a34c029bb13df01e40e3e70e0d007bd",
        // é•œåƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ä¸¤ä¸ªé•œåƒçš„å†…å®¹ä¸€æ ·(ä¹Ÿå°±æ˜¯RepoDisgestsä¸€æ ·)ï¼Œä½†æ˜¯æ„å»ºæ—¶é—´ä¸åŒæˆ–è€…åç§°tagä¸åŒï¼Œidä¹Ÿæ˜¯ä¸åŒçš„ã€‚

        "RepoTags": [
            "alpine:latest"
        ],
        // é•œåƒçš„æ ‡ç­¾ï¼Œè¿™é‡Œè¡¨ç¤ºè¿™æ˜¯ alpine é•œåƒçš„æœ€æ–°ç‰ˆæœ¬ã€‚

        "RepoDigests": [
            "alpine@sha256:c5b1261d6d3e43071626931fc004f70149baeba2c8ec672bd4f27761f8e1ad6b"
        ],
        // é•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼Œç”¨äºéªŒè¯é•œåƒçš„å®Œæ•´æ€§ã€‚

        "Parent": "",
        // çˆ¶é•œåƒçš„IDï¼Œä¸ºç©ºè¡¨ç¤ºæ­¤é•œåƒæ²¡æœ‰çˆ¶é•œåƒã€‚

        "Comment": "",
        // é•œåƒçš„æ³¨é‡Šã€‚

        "Created": "2024-01-27T00:30:48.743965523Z",
        // é•œåƒçš„åˆ›å»ºæ—¶é—´ã€‚

        "Container": "4189cbc534955765760c227f328ec1cdd52e8550681c2bf9f8f990b27b644f9c",
        // ç”¨äºåˆ›å»ºæ­¤é•œåƒçš„å®¹å™¨çš„IDã€‚çœ‹æ¥å¾ˆå¤šéƒ½æ˜¯ä»å®¹å™¨ç›´æ¥commitæäº¤å‡ºæ¥çš„é•œåƒï¼Œè€Œä¸æ˜¯docker buildå‡ºæ¥çš„å’¯ï¼Œå¯èƒ½æ˜¯~

        "ContainerConfig": {
            // åˆ›å»ºè¯¥é•œåƒçš„å®¹å™¨çš„é…ç½®ä¿¡æ¯ã€‚
            "Hostname": "4189cbc53495",
            // å®¹å™¨çš„ä¸»æœºåã€‚
            "Domainname": "",
            // å®¹å™¨çš„åŸŸåã€‚
            "User": "",
            // å®¹å™¨å†…å‘½ä»¤è¿è¡Œçš„ç”¨æˆ·ã€‚
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            // è¿™äº›è®¾ç½®æ§åˆ¶æ˜¯å¦å°†stdinã€stdoutã€stderré™„åŠ åˆ°å®¹å™¨ã€‚
            "Tty": false,
            // æ˜¯å¦ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªttyè®¾å¤‡ã€‚
            "OpenStdin": false,
            "StdinOnce": false,
            // è¿™äº›è®¾ç½®æ§åˆ¶å®¹å™¨çš„stdinã€‚
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            // å®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚
            "Cmd": [
                "/bin/sh",
                "-c",
                "#(nop) ",
                "CMD [\"/bin/sh\"]"
            ],
            // å®¹å™¨çš„é»˜è®¤å‘½ä»¤å’Œå‚æ•°ã€‚
            "Image": "sha256:9a5ce069f40cfe0f2270eafbff0a0f2fa08f1add73571af9f78209e96bb8a5e9",
            // åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨çš„é•œåƒIDã€‚
            "Volumes": null,
            // å®¹å™¨ä½¿ç”¨çš„å·ã€‚
            "WorkingDir": "",
            // å®¹å™¨çš„å·¥ä½œç›®å½•ã€‚
            "Entrypoint": null,
            // å®¹å™¨çš„å…¥å£ç‚¹ã€‚
            "OnBuild": null,
            // Dockerfileä¸­çš„ONBUILDè§¦å‘å™¨æŒ‡ä»¤ã€‚
            "Labels": {}
            // å®¹å™¨çš„æ ‡ç­¾ã€‚
        },

        "DockerVersion": "20.10.23",
        // åˆ›å»ºé•œåƒæ—¶ä½¿ç”¨çš„Dockerç‰ˆæœ¬ã€‚

        "Author": "",
        // é•œåƒçš„ä½œè€…ã€‚

        "Config": {
            // é•œåƒé…ç½®ï¼Œç±»ä¼¼äºContainerConfigï¼Œä½†ç”¨äºè¿è¡Œæ—¶ã€‚
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/sh"
            ],
            // å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚
            "Image": "sha256:9a5ce069f40cfe0f2270eafbff0a0f2fa08f1add73571af9f78209e96bb8a5e9",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": null
        },

        "Architecture": "amd64",
        // é•œåƒçš„æ¶æ„ã€‚

        "Os": "linux",
        // é•œåƒçš„æ“ä½œç³»ç»Ÿã€‚

        "Size": 7377074,
        // é•œåƒçš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰ã€‚

        "VirtualSize": 7377074,
        // é•œåƒçš„è™šæ‹Ÿå¤§å°ã€‚

        "GraphDriver": {
            // é•œåƒçš„å­˜å‚¨é©±åŠ¨ä¿¡æ¯ã€‚
            "Data": {
                "MergedDir": "/var/lib/docker/overlay2/bb16c3d711597eff0baab5640f474ef4c8c1c40df0351e0a21343e1362676504/merged",
                "UpperDir": "/var/lib/docker/overlay2/bb16c3d711597eff0baab5640f474ef4c8c1c40df0351e0a21343e1362676504/diff",
                "WorkDir": "/var/lib/docker/overlay2/bb16c3d711597eff0baab5640f474ef4c8c1c40df0351e0a21343e1362676504/work"
            },
            "Name": "overlay2"
        },

        "RootFS": {
            // é•œåƒçš„æ ¹æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯ã€‚
            "Type": "layers",
            "Layers": [
                "sha256:d4fc045c9e3a848011de66f34b81f052d4f2c15a17bb196d637e526349601820"
            ]
        },

        "Metadata": {
            // é•œåƒçš„å…ƒæ•°æ®ã€‚
            "LastTagTime": "0001-01-01T00:00:00Z"
        }
    }
]

```

