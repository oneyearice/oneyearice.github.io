# ç¬¬2èŠ‚. sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾



ä¸¤å¼ ã€ä¸‰å¼ ï¼Œå››å¼ ï¼Œéƒ½æ˜¯ä»ä¸¤å¼ å¼€å§‹çš„ï¼Œ

ä¸¤å¼ è¡¨æŸ¥è¯¢ï¼Œåº”è¯¥å°±æ˜¯å…ˆè®¨è®ºä¸¤å¼ è¡¨çš„ç»„åˆèµ·æ¥ã€‚

## JOIN

ä¸¤ç§å½¢å¼çš„ç»„åˆ

çºµå‘å’Œæ¨ªå‘åˆå¹¶



### çºµå‘unionåˆå¹¶

å°±åƒä¸¤ä¸ªæ–‡ä»¶å†…å®¹cat file1 file2 è¿½åŠ åœ¨ä¸€èµ·ä¸€æ ·ï¼Œä½†æ˜¯db.tablesçºµå‘åˆå¹¶éœ€è¦titleå¯¹é½

![image-20230517103239189](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517103239189.png)

ä¸¤å¼ è¡¨çš„TIDå’Œstuidä¸ä¸€æ ·æ²¡å…³ç³»ï¼Œä¹Ÿå¯ä»¥åˆï¼Œåªè¦å†…å®¹ç›¸åŒ¹é…å°±è¡Œã€‚

### unionåˆå¹¶

![image-20230517103444525](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517103444525.png)

é”™ä½åˆèµ·æ¥ï¼Œæ²¡æœ‰æ„ä¹‰äº†å°±

![image-20230517103646044](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517103646044.png)



### unionçš„å»é‡åŠŸèƒ½çš„å¼€å…³

é€šè¿‡ä¸¤å¼ ä¸€æ ·çš„è¡¨æ¥æµ‹è¯•

![image-20230517104058223](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517104058223.png)





![image-20230517104357060](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517104357060.png)



### å»é‡æ–¹æ³•2ï¼šdistinct

![image-20230517104618445](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517104618445.png)





### æ¨ªå‘åˆå¹¶çš„é€»è¾‘è¾ƒä¸ºå¤æ‚

è”æƒ³paste file1 file2è¿™ä¸ªshellå‘½ä»¤ï¼Œè™½ç„¶å…³ç³»ä¸å¤§



### æ¨ªå‘1ï¼šcrossäº¤å‰è¿æ¥,ä¹Ÿå°±æ˜¯ç¬›å¡å°”ä¹˜ç§¯ç»„åˆï¼Œå°±æ˜¯10æ¡*20æ¡è¿™ç§200æ¡ç»“æœçš„ç»„åˆ

![image-20230517110119043](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517110119043.png)

![image-20230517110343572](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517110343572.png)

å¥½åƒA CROSS B å’ŒB CROSS A å…¶å®æ˜¯ä¸€æ ·çš„

crossä¸€èˆ¬ç”¨çš„å°‘çš„ï¼Œä¸€èˆ¬æ˜¯æ‰¾åˆ°ç›¸å…³è”çš„ä¿¡æ¯

![image-20230517133430647](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517133430647.png)

### å†…è¿æ¥-inner join

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517133526231.png" alt="image-20230517133526231" style="zoom:50%;" /> 



![image-20230517133824655](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517133824655.png)

é™åˆ¶åˆ¶å®šåˆ—ï¼Œéœ€è¦æ ‡æ˜å“ªä¸ªè¡¨

![image-20230517135347179](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517135347179.png)

åˆ«åç®€åŒ–ä¸‹è¾“å…¥

![image-20230517143231473](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517143231473.png)



![image-20230517145222967](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517145222967.png)





### å·¦å¤–è¿æ¥-left outer join, outerå¯ä¸å†™

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517150535217.png" alt="image-20230517150535217" style="zoom:50%;" /> 

å°±æ˜¯Açš„å…¨è¦ï¼Œå¹¶ä¸”æ ¹æ®Aå…³è”Bé‡Œçš„ä¿¡æ¯éƒ½æå‡ºæ¥ã€‚

è§‚å¯Ÿä¸‹å›¾ï¼Œç†è§£left out joinçš„æ„æ€ğŸ‘‡

![image-20230517150936457](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517150936457.png)

å†™å‘½ä»¤çš„æ—¶å€™ left joinçš„å·¦è¾¹çš„è¡¨å°±æ˜¯å…¨éƒ¨è¦ï¼Œå³è¾¹çš„è¡¨å°±æ˜¯å†™å…³è”è¿‡å»çš„äº¤é›†ã€‚

![image-20230517151418481](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517151418481.png)



### å³å¤–è¿æ¥

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517151616756.png" alt="image-20230517151616756" style="zoom:50%;" /> 

![image-20230517151605220](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517151605220.png)



asçœŸçš„å“ªå“ªéƒ½å¯ä»¥åŠ å“¦ï¼Œä¼˜åŒ–ä¸‹è¡¨å¤´ä¾¿äºç†è§£ï¼š

![image-20230517152254164](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517152254164.png)



### å¯¹æŸ¥è¯¢å‡ºæ¥çš„inner join ã€left joinã€right joinè¿›ä¸€æ­¥åšè¿‡æ»¤

è¡¨çš„åˆ«åå’Œå­—æ®µçš„åˆ«åï¼Œè¡¨çš„åˆ«åå®šä¹‰äº†ï¼Œè°ƒç”¨å°±è¦ç”¨åˆ«åï¼Œå­—æ®µçš„åˆ«ååªæ˜¯ä¸€æ¬¡æ€§æœ‰æ•ˆï¼Œè°ƒç”¨è¿˜å¾—ç”¨åŸå

![image-20230517152740042](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517152740042.png)





### left join å»æ‰äº¤é›†

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517153836673.png" alt="image-20230517153836673" style="zoom:50%;" /> 

![image-20230517154128390](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517154128390.png)

ä¸Šå›¾ğŸ‘†æ˜¯A left join Bï¼Œä¸‹å›¾ğŸ‘‡æ˜¯A left join B and xxx is nullï¼š

![image-20230517154136754](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517154136754.png)

ğŸ‘†å›¾å†™é”™äº†ï¼Œä¸åº”è¯¥æ˜¯andè€Œæ˜¯havingæˆ–è€…where

![image-20230517160312060](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517160312060.png)

![image-20230517160322135](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517160322135.png)

### right join å»æ‰äº¤é›†

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517160927670.png" alt="image-20230517160927670" style="zoom:50%;" /> 

![image-20230517161243949](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517161243949.png)



### å…¨è¿æ¥ full outer join

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517161600787.png" alt="image-20230517161600787" style="zoom:50%;" /> 



![image-20230517161547386](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517161547386.png)



![image-20230517161637568](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517161637568.png)



ç†è®ºä¸Šæ˜¯full joinï¼Œå¯æƒœmysqlå’Œmariadbä¸æ”¯æŒæ‰€è°“çš„full

![image-20230517161815127](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517161815127.png)



æ¢ç§å†™æ³•

![image-20230517162437787](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517162437787.png)

æ’ç‰ˆæ¢è¡Œä¸‹

![image-20230517162519555](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517162519555.png)



### full joinå»é™¤äº¤é›†

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517164227007.png" alt="image-20230517164227007" style="zoom:50%;" /> 

å¦‚æœğŸ‘‡è¿™æ ·å†™æ˜¯æ²¡æœ‰ç”¨çš„

![image-20230517164150550](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517164150550.png)

### è¦ç”¨åˆ°å­æŸ¥è¯¢ï¼šselectçš„ç»“æœåµŒå…¥å¦ä¸€ä¸ªselectè¯­å¥æˆ–è€…DMLè¯­å¥ã€‚

æ¯”å¦‚ï¼šæŸ¥è¯¢å¹´é¾„å¤§äºå¹³å‡å¹´é¾„çš„å­¦ç”Ÿï¼Œ

![image-20230517164405204](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517164405204.png)



æŠŠè€å¸ˆçš„å¹³å‡å¹´é¾„ è¦†ç›–åˆ° 20å·å­¦ç”Ÿçš„å¹´é¾„

![image-20230517165253526](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517165253526.png)



ç„¶åå°±åšä¸€ä¸‹FULL JOIN å»é™¤äº¤é›†

![image-20230517172000852](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517172000852.png)

æ‰€ä»¥è¿™ä¸ªnameï¼Œageï¼Œgenderçš„å†²çªæ˜¯å’Œtearcherè¡¨é‡Œçš„å†²çªäº†

![image-20230517172232575](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517172232575.png)

### è‡³æ­¤ï¼Œå°±å¾—åˆ°äº†FULL JOIN çš„å»é™¤äº¤é›†çš„å†™æ³•ğŸ‘†



ç°åœ¨å›å¤´æ¥ï¼ŒğŸ‘‡è¿™äº›éƒ½æ˜¯å­˜åœ¨å†²çªéšæ‚£çš„

![image-20230517172411983](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517172411983.png)







æ¡ˆä¾‹1ï¼š

![image-20230517181026794](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517181026794.png)

éœ€æ±‚ï¼šæŸ¥è¯¢æ¯ä¸ªå‘˜å·¥çš„å§“åå’Œ ä¸Šçº§è´Ÿè´£äººçš„å§“å

å¦‚æœæ˜¯ä¸¤å¼ è¡¨ï¼Œå°±å¯ä»¥è¿™ä¹ˆåš

<img src="2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517182759364.png" alt="image-20230517182759364" style="zoom:50%;" /> 

### è¿™æ ·å°±å­¦åˆ°äº†è‡ªè¿æ¥ğŸ‘‡

![image-20230517183133775](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517183133775.png)



![image-20230517183257675](2-sqlè¯­å¥DQLå¤šè¡¨æŸ¥è¯¢å’Œè§†å›¾.assets/image-20230517183257675.png)

