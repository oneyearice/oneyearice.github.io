# ç¬¬4èŠ‚. æ–‡ä»¶èŠ‚ç‚¹è¡¨



 

## æ–‡ä»¶çš„å­˜æ”¾æœ‰inodeè¡¨æ ¼å’Œdataè¡¨æ ¼



![image-20220110160637127](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110160637127.png) 

ä¸Šå›¾å¯è§ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åŽï¼Œinodeå°±å æŽ‰ä¸€ä¸ªã€‚

![image-20220110161211321](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110161211321.png) 

touchå‘½ä»¤æœ¬èº«ä¸æ”¯æŒè¿™ä¹ˆå¤šä¸ªå‚æ•°ï¼Œæ‰€ä»¥æ¢ç§æ–¹å¼

```
echo f{1..524288} |xargs touch
```

èŠ‚ç‚¹ç¼–å·

![img](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/clip_image064-164179753255932.jpg)

 ä¸Šå›¾å¯è§åˆ†åŒºçš„ç©ºé—´å¤§å°ï¼Œä»¥åŠèŠ‚ç‚¹æ•°æœ€å¤§å€¼ã€‚sda1çš„inodesæœ€å¤§å€¼ä¸º65536ã€‚

è¶…å‡ºèŠ‚ç‚¹ç¼–å·å°±ä¸è¡Œäº†

**echo f{1..65539} |xargs touch**

![img](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/clip_image066-164179753255933.jpg)

æ‰€ä»¥çœ‹åˆ°æ²¡æœ‰è®¾å¤‡ç©ºé—´ä¸ä¸€å®šæ˜¯çœŸçš„ï¼Œå¯èƒ½æ˜¯èŠ‚ç‚¹ç¼–å·æ»¡äº†ã€‚

![img](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/clip_image068-164179753255934.jpg)

åˆ é™¤rm *æ˜¯ä¸è¡Œçš„ï¼Œå¯ä»¥åˆ é™¤æ‰€åœ¨æ–‡ä»¶å¤¹rm -rf /boot/testdir

 æˆ–è€…è¿™ä¹ˆåˆ å°±è¡Œäº†å•Šï¼š

```
echo f{1..524288} |xargs rm -rf
```

èŠ‚ç‚¹ç¼–å·å’Œè½¯è¿žæŽ¥å’Œç¡¬é“¾æŽ¥å¯†åˆ‡ç›¸å…³

![image-20220110164258451](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110164258451.png) 

 

extæ–‡ä»¶ç³»ç»Ÿçš„æž¶æž„

![image-20220110164345044](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110164345044.png) 

 

ç›´æŽ¥æŒ‡é’ˆæ˜¯12ä¸ª

![image-20220110164500286](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110164500286.png) 

 **â‘ æ•°æ®é‡ä½ŽäºŽ48Kï¼Œç›´æŽ¥æŒ‡é’ˆå°±å¯ä»¥æžå®šã€‚**

![image-20220110164749601](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110164749601.png) 

**â‘¡è¶…å‡º48K--4Mï¼Œä½¿ç”¨é—´æŽ¥æŒ‡é’ˆè¡¨ç¤ºã€‚**

![image-20220110164813549](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110164813549.png) 

**â‘¢4M-4GBçš„é‡‡ç”¨äºŒçº§æŒ‡é’ˆ**

![image-20220110170239283](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110170239283.png) 

çŽ°åœ¨centos7æ˜¯XFTæ–‡ä»¶ç³»ç»Ÿå’Œextçš„æ–‡ä»¶ç³»ç»Ÿä¸ä¸€æ ·ã€‚

ä¸ç®¡ä»€ä¹ˆç³»ç»Ÿéƒ½æ˜¯ç±»ä¼¼çš„æœºåˆ¶ã€‚

 

å¯¹äºŽæ–‡ä»¶å¤¹æ¥è®²ä»–çš„å†…å®¹æ”¾çš„æ˜¯ä»€ä¹ˆ

![image-20220110170845135](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110170845135.png) 

**æ–‡ä»¶åæ˜¯å±žäºŽæ–‡ä»¶å¤¹çš„å†…å®¹DATAã€‚æ˜¯æ”¾åœ¨æ•°æ®å—ç©ºé—´çš„ã€‚**

æ˜Žç™½è¿™ä¸€ç‚¹ï¼Œrm f1æœ¬è´¨ä¸Šæ˜¯åˆ é™¤ä»–çš„èŠ‚ç‚¹è¡¨ï¼ŒæŒ‡æ­£æŒ‡å‘çš„æ•°æ®å—å°±æ²¡äººç”¨äº†ï¼Œè¯¥ç©ºé—´æ ‡è®°ä¸ºç©ºé—²freeçŠ¶æ€ï¼Œä½†æ˜¯ä¸ä¼šåˆ é™¤æ•°æ®ã€‚å¦‚æžœä½ æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¯èƒ½ä¼šè¦†ç›–æŽ‰çš„ã€‚

æ­¤å¤–dir1/ä¸‹çš„F1çš„æ•°æ®å°±æ¸…äº†ã€‚

![image-20220110171130174](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110171130174.png) 



æ‰€ä»¥åˆ é™¤f1æ˜¯éœ€è¦æœ‰f1æ‰€åœ¨æ–‡ä»¶å¤¹çš„æƒé™å°±è¡Œäº†ã€‚

ç¡¬è¿žæŽ¥ï¼Œæœ¬èº«å°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶

![img](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/clip_image084-164179753256042.jpg)

è·¨åˆ†åŒºäº†**ï¼Œä¸åŒåˆ†åŒº**è‚¯å®šä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶äº†ï¼Œæ‰€ä»¥è‚¯å®š**ä¸æ”¯æŒ**

![img](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/clip_image084-164179753256042.jpg)

ç¡¬é“¾æŽ¥**ä¸èƒ½é’ˆå¯¹æ–‡ä»¶å¤¹**åˆ›å»ºã€‚æ®è¯´æ˜¯é˜²æ­¢å¾ªçŽ¯çŽ°è±¡ã€‚

![image-20220110180350667](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110180350667.png) 



--------------



 ![image-20220110180016043](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110180016043.png) 

![image-20220110180102220](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110180102220.png) 

åˆ a1çš„æ“ä½œç­‰ä»·ä¸Šå›¾çš„ç¤ºä¾‹ 





![image-20220110174709900](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110174709900.png) 



![image-20220110174724737](4-æ–‡ä»¶èŠ‚ç‚¹è¡¨.assets/image-20220110174724737.png) 



å¤‡æ³¨ï¼š

```
ðŸ‘‰ä»¥ä¸‹æ˜¯vimä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åŽecho ç„¶åŽvim vim å‘çŽ°indoeåœ¨ä¸¤ä¸ªæ•°å­—è·³æ¥è·³åŽ»çš„(ä¼°è®¡å’Œvimæ‰“å¼€çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª.xxx.swpæœ‰å…³ï¼Œå¯èƒ½æ˜¯è¿™ä¸ªåŽŸå› ï¼Œä¹Ÿä¸æ˜¯swpæ–‡ä»¶çš„inodeä¸åœ¨é‚£ä¸¤ä¸ªåå¤æ›¿æ¢çš„inodeé‡Œé¢ï¼Œåæ­£vimè¯¥æ–‡ä»¶inodeæ˜¯å˜çš„ï¼Œè€Œä¸”æ˜¯2ä¸ªinodeæ•°å­—æ¥å›žå˜)ã€‚ç„¶åŽechoä¸ä¼šã€‚
[10:54:28 root@localhost data]#echo inode_echo >> test
[10:54:43 root@localhost data]#stat test
  File: test
  Size: 19              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577448    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:54:20.066021237 +0800
Modify: 2022-01-29 10:54:43.345023132 +0800
Change: 2022-01-29 10:54:43.345023132 +0800
 Birth: 2022-01-29 10:54:20.066021237 +0800
[10:54:44 root@localhost data]#ll -i
total 8
51325766 drwxr-xr-x. 2 root  root  6 Jan 19 19:57 dir
  373349 drwxr-xr-x. 2 user1 g12   6 Jan 19 19:58 dir2
33577410 -rw-rw-r--+ 1 root  root  7 Jan 29 10:53 f1
33577446 -rw-r--r--. 1 user1 g12   0 Jan 19 19:58 f2
33577448 -rw-r--r--. 1 root  root 19 Jan 29 10:54 test
[10:54:47 root@localhost data]#
[10:54:50 root@localhost data]#vim test
[10:55:00 root@localhost data]#
[10:55:00 root@localhost data]#vim test
[10:55:03 root@localhost data]#ll -i
total 8
51325766 drwxr-xr-x. 2 root  root  6 Jan 19 19:57 dir
  373349 drwxr-xr-x. 2 user1 g12   6 Jan 19 19:58 dir2
33577410 -rw-rw-r--+ 1 root  root  7 Jan 29 10:53 f1
33577446 -rw-r--r--. 1 user1 g12   0 Jan 19 19:58 f2
33577450 -rw-r--r--. 1 root  root 28 Jan 29 10:54 test
[10:55:04 root@localhost data]#stat test
  File: test
  Size: 28              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577450    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:55:01.373024600 +0800
Modify: 2022-01-29 10:54:59.985024487 +0800
Change: 2022-01-29 10:54:59.987024487 +0800
 Birth: 2022-01-29 10:54:59.985024487 +0800
[10:55:09 root@localhost data]#vim test
[10:55:25 root@localhost data]#
[10:55:25 root@localhost data]#
[10:55:25 root@localhost data]#stat test
  File: test
  Size: 39              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577448    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:55:25.695026580 +0800
Modify: 2022-01-29 10:55:25.695026580 +0800
Change: 2022-01-29 10:55:25.697026580 +0800
 Birth: 2022-01-29 10:55:25.695026580 +0800
[10:55:27 root@localhost data]#
[10:55:35 root@localhost data]#
[10:55:35 root@localhost data]#vim test
[10:55:44 root@localhost data]#
[10:55:44 root@localhost data]#stat test
  File: test
  Size: 50              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577450    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:55:44.687028126 +0800
Modify: 2022-01-29 10:55:44.687028126 +0800
Change: 2022-01-29 10:55:44.688028126 +0800
 Birth: 2022-01-29 10:55:44.687028126 +0800
[10:55:45 root@localhost data]#
[10:57:23 root@localhost data]#stat test
  File: test
  Size: 55              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577448    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:57:23.128036141 +0800
Modify: 2022-01-29 10:57:23.128036141 +0800
Change: 2022-01-29 10:57:23.129036141 +0800
 Birth: 2022-01-29 10:57:23.128036141 +0800
[10:57:23 root@localhost data]#echo 12 >> test
[10:57:29 root@localhost data]#stat test
  File: test
  Size: 58              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577448    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:57:23.128036141 +0800
Modify: 2022-01-29 10:57:29.437036654 +0800
Change: 2022-01-29 10:57:29.437036654 +0800
 Birth: 2022-01-29 10:57:23.128036141 +0800
[10:57:30 root@localhost data]#echo 333 >> test
[10:57:35 root@localhost data]#stat test
  File: test
  Size: 62              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 33577448    Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:default_t:s0
Access: 2022-01-29 10:57:23.128036141 +0800
Modify: 2022-01-29 10:57:35.603037157 +0800
Change: 2022-01-29 10:57:35.603037157 +0800
 Birth: 2022-01-29 10:57:23.128036141 +0800
[10:57:36 root@localhost data]#


total 20
33577460 drwxrwxrwx.  4 root  root    78 Jan 29 10:58 .
     128 dr-xr-xr-x. 18 root  root   236 Jan 10 18:13 ..
51325766 drwxr-xr-x.  2 root  root     6 Jan 19 19:57 dir
  373349 drwxr-xr-x.  2 user1 g12      6 Jan 19 19:58 dir2
33577410 -rw-rw-r--+  1 root  root     7 Jan 29 10:53 f1
33577446 -rw-r--r--.  1 user1 g12      0 Jan 19 19:58 f2
33577448 -rw-r--r--.  1 root  root    62 Jan 29 10:57 test
33577447 -rw-r--r--.  1 root  root 12288 Jan 29 10:58 .test.swp

```

