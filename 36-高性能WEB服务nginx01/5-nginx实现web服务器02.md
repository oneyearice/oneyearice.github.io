# ç¬¬5èŠ‚. nginxå®ç°webæœåŠ¡å™¨02



![image-20231103105617856](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103105617856.png)



![image-20231103105630727](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103105630727.png)

æ¯”å¦‚ç»Ÿä¸€æŠŠé™æ€èµ„æºæ”¾åˆ°/static/ä¸‹ï¼Œæˆ–è€…å°†åç¼€å†™å…¨äº†è¿›è¡Œè½¬å‘ã€‚



### aliaså’Œrootï¼Œæ›¿æ¢å’Œæ‹¼æ¥

![image-20231103113348785](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103113348785.png)



![image-20231103133956115](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103133956115.png)

rootæ˜¯æ‹¼æ¥ï¼Œè€Œaliasæ˜¯çœ‹â‘ å¦‚æœè®¿é—®çš„urlé‡Œçš„æœ‰aliasçš„pathæ¯”å¦‚ä¸Šå›¾çš„aboutï¼Œé‚£ä¹ˆå°±æŠŠæ•´ä¸ªurlæ›¿æ¢æˆaliasçš„pathã€‚äºæ˜¯www.site1.com/about/index.htmlå°±è®¿é—®äº†/opt/testdir/index.htmläº†ã€‚



åŠ ä¸åŠ /å°±æ˜¯ä¸ºäº†xx/xxx/zz/å’Œxx/xxx/zzæ•ˆæœä¸€æ ·å› ä¸ºæµè§ˆå™¨ä¼šè‡ªåŠ¨é‡å®šå‘ç±»ä¼¼curl -Lçš„æ•ˆæœ

![image-20231103135807184](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103135807184.png)

ä¸Šå›¾æ³¨æ„locationé‡Œæ˜¯/about/ï¼Œç”¨æˆ·è¯·æ±‚çš„www.site1.com/abouté‡Œæ˜¯ä¸åŒ…å«/about/çš„æ‰€ä»¥ä¸ä¼šèµ°locationçš„è½¬å‘ï¼Œè€Œæ˜¯èµ°çš„élocationçš„ä¹Ÿå°±æ˜¯/data/site1/çš„è½¬å‘è·¯å¾„ï¼Œå…·ä½“è§error.log

![image-20231103141055705](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103141055705.png)





![image-20231103135930156](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103135930156.png)

è€Œå®˜æ–¹çš„è§£é‡Šå¾ˆæ¸…æ¥šäº†å·²ç»

![image-20231103135957099](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103135957099.png)

å°±æ˜¯/user/å’Œ/userä½ ä¸æƒ³åˆæˆä¸€ä¸ªURLï¼Œæ˜¯å¯ä»¥æŒ‡åˆ°ä¸åŒçš„ç«™ç‚¹URLä¸Šå»çš„ã€‚è€Œä¸€èˆ¬æƒ…å†µéƒ½æ˜¯ä½¿ç”¨/userä¸å¸¦/è¿™æ ·ï¼Œç”¨æˆ·è®¿é—®/userå’Œ/user/å…¶å®éƒ½æ˜¯ä¸€ä¸ªç«™ç‚¹ï¼Œå› ä¸º/userç”¨æˆ·è®¿é—®å‘¢ä¼šè‡ªåŠ¨301åˆ°/user/ä¸Šå»çš„ã€‚

ä¸Šé¢è®¨è®ºäº†locationé‡Œè·¯å¾„çš„ç»“å°¾å¸¦ä¸å¸¦/çš„åŒºåˆ«ï¼Œä¸‹é¢è®¨è®ºalias/rootçš„è½¬å‘è·¯å¾„çš„ç»“å°¾å¸¦ä¸å¸¦/çš„åŒºåˆ«

![image-20231103142639778](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103142639778.png)

### æ€»ç»“ä¸‹

![image-20231103143136974](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103143136974.png)

### ä¿®æ­£ç†è§£

ä¸Šå›¾æ€»ç»“çš„å¤„ç†é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯éœ€è¦è¡¥å……



**ç”¨æˆ·è¡Œä¸ºï¼š**

1ã€curl www.site1.com/aboutè¿™æ˜¯è®¿é—®aboutæ–‡ä»¶

2ã€curl www.site1.com/about/è¿™æ˜¯è®¿é—®about/index.htmlæ–‡ä»¶

é€šå¸¸éƒ½ä¼šlocationé‡Œå†™æˆ/aboutè€Œä¸æ˜¯/about/æ¥åº”å¯¹ï¼Œè¿™æ ·ç”¨æˆ·ä¸ç®¡æœ€åå¸¦ä¸å¸¦/å®é™…æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºä¸å¸¦/ä¹Ÿä¼šåŒ¹é…locationç„¶å301åˆ°/about/ã€‚



**locationåŒ¹é…**

1ã€å†™æˆ/aboutå’Œ/about/æ˜¯æœ‰åŒºåˆ«çš„ï¼Œé¦–å…ˆç”¨æˆ·è®¿é—®çš„urlé‡Œå¿…é¡»å®Œæ•´åŒ…å«ï¼Œæ¯”å¦‚locationå†™çš„æ˜¯/about/ä½†æ˜¯ç”¨æˆ·è¡Œä¸ºé‡Œæ˜¯/aboutï¼Œå°±ä¸ä¼šå‘½ä¸­äº†ï¼›

2ã€ç»“åˆç”¨æˆ·è¡Œä¸ºï¼Œå¦‚æœæ˜¯/about/é‚£ä¹ˆå°±æ˜¯è®¿é—®çš„/about/index.htmlæ­¤æ—¶ "alias"  å°±ä¼šå°†/about/çš„urlæ•´ä¸ªæ›¿æ¢æˆaliasçš„è·¯å¾„ï¼Œå¹¶åœ¨æœ€åè¡¥ä¸Šindex.htmlï¼›æ­¤æ—¶å¦‚æœaliasé‚£é‡Œæ²¡æœ‰å†™æˆæ–‡ä»¶å¤¹è€Œæ˜¯å†™æˆ/xxxï¼Œé‚£ä¹ˆæ•´ä¸ªurlå°±æœ‰é—®é¢˜äº†ï¼Œå°±å˜æˆäº†xxxindex.htmlä¸­é—´ä¼šå°‘äº†/ã€‚    ä¸è¿‡rootä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºrootæ˜¯æ‹¼æ¥çš„ï¼Œä¼šæ‹¼æ¥æˆxxx/about/index.html

![image-20231103151334087](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103151334087.png)



**alias/rootè½¬å‘å¤„ç†**

1ã€aliasæ˜¯æ•´ä¸ªæ›¿æ¢åªè¦ç”¨æˆ·è¡Œä¸ºé‡ŒåŒ…å«äº†locationé‡Œçš„æ¯”å¦‚/abouté‚£ä¹ˆæ•´ä¸ªurléƒ½ä¼šæ›¿æ¢æ‰aliasçš„ä¸œè¥¿ï¼Œå½“ç„¶å¦‚æœç”¨æˆ·è¡Œä¸ºæœ€åå¸¦/ä¼šè‡ªåŠ¨è¡¥ä¸Šindex.htmlçš„ã€‚

2ã€rootæ˜¯æ‹¼æ¥ï¼Œé—®é¢˜ä¸å¤§ï¼Œæ€»ä¹‹å®æµ‹ä¸€ä¸‹ï¼Œç•™æ„å°±å¥½ï¼Œå®é™…æµ‹è¯•oKå°±è¡Œï¼Œä¸è¦çº ç»“äº†ã€‚









## index



![image-20231103160402671](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103160402671.png)



![image-20231103154956605](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103154956605.png)

ä¸Šå›¾ğŸ‘†æœ‰ä¸€å¤„åœ°æ–¹è¦æ”¹ï¼Œå°±æ˜¯location /about/æ”¹æˆlcoation /aboutï¼Œè¿™æ ·curl -L www.site1.com/about å°±èƒ½åˆ©ç”¨301é‡å®šå‘äº†ã€‚



### error_page code



![image-20231103160343976](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103160343976.png)



![image-20231103160426147](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103160426147.png)

æ‰¾ä¸åˆ°404 Not Foundå“ªæ¥çš„ï¼Œå› ä¸ºé…ç½®æ–‡ä»¶é‡Œ404æ˜¯æ³¨é‡Šçš„ï¼Œ

<img src="5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103163803870.png" alt="image-20231103163803870" style="zoom:50%;" />



æˆ‘å¥½åƒæ‰¾åˆ°äº†ï¼ŒğŸ‘‡åº”è¯¥å°±æ˜¯ngx_http_special_response.cæ–‡ä»¶

![image-20231103164208989](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103164208989.png)

å…·ä½“è°ƒç”¨å’Œæœ€ç»ˆåº”ç”¨åˆ°é¡µç ä¸çŸ¥é“ä»€ä¹ˆå¼„å¾—ï¼Œä¸è¿‡è¿™é‡Œç”±æ˜ç¡®å¾—htmlçš„è¯­æ³•ï¼ŒçŸ¥é“æ˜¯æºç é‡Œçš„404å·²ç»åšå¥½äº†å°±è¡Œäº†ã€‚





![image-20231103170612543](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103170612543.png)

å¥½åƒåªæ˜¯ç®€å•åšä¸€ä¸ªerroré¡µé¢ä¸ç”¨å†™locationå•Š

![image-20231103170810342](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103170810342.png)



![image-20231103171439567](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103171439567.png)

![image-20231103171521884](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103171521884.png)





#### locationåœ¨å¤„ç†error_pageæ—¶çš„æ³¨æ„ç‚¹



1ã€rootæ²¡æ¯›ç—…

![image-20231103180142827](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103180142827.png)

rootçš„æœ€å/å†™ä¸å†™éƒ½è¡Œï¼Œå› ä¸ºæ—¶location å’Œ root æ‹¼æ¥çš„ï¼Œlocationé‡Œå¸¦äº†/äº†

![image-20231103180337811](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103180337811.png)



2ã€aliasæœ‰ç‚¹ç»†èŠ‚è¦æ³¨æ„

![image-20231103181604670](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103181604670.png)



æ³¨æ„ç”±äºé‡å®šå‘çš„å­˜åœ¨ä¹Ÿå°±æ˜¯locationè½¬å‘çš„å­˜åœ¨ï¼Œè¿™äº›é‡å®šå‘çš„åŠ¨ä½œæ˜¯ä¸ä¼šæ—¥å¿—ä¸­çœ‹åˆ°çš„ï¼Œæ—¥å¿—ä¸­åªæ˜¯æœ€ç»ˆçš„ä¸€ä¸ªç»“æœã€‚

è¿™é‡Œç›²çŒœlocation = /404.html è¢«aliasè½¬æˆäº†/opt/testdir/ï¼Œç„¶åæ²¡æœ‰ç»™ä½ è‡ªåŠ¨è¡¥ä¸€ä¸ªindex.html

![image-20231103182203259](5-nginxå®ç°webæœåŠ¡å™¨02.assets/image-20231103182203259.png)

æ€»ä¹‹ä¹Ÿå®ç°äº†aliaså’Œrootçš„404locationè½¬å‘ã€‚
