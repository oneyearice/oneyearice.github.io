# 3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.md



# redisçš„å‘Šè­¦ä¼˜åŒ–

å¯åŠ¨çš„å‘Šè­¦ï¼Œæˆ‘ç”¨çš„rocky-linuxï¼Œç°åœ¨å°±ä¸€ä¸ªå‘Šè­¦äº†



![image-20241230110527581](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230110527581.png)



ä¸€äº›æŒ‡æ ‡æ— éœ€å…³å¿ƒï¼Œåœ¨æ–°ç‰ˆçš„linuxä¸‹ï¼Œä½†æ˜¯è¿˜æ˜¯äº†è§£ä¸‹

![image-20241230134541251](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230134541251.png)



æ­£å„¿å…«ç»çš„åŠå¼€è¿æ¥å’Œå…¨è¿æ¥çœ‹è¿™ä¸ª

https://www.xiaolincoding.com/network/3_tcp/tcp_queue.html#%E4%BB%80%E4%B9%88%E6%98%AF-tcp-%E5%8D%8A%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97%E5%92%8C%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97



<img src="3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/3.jpg" alt="åŠè¿æ¥é˜Ÿåˆ—ä¸å…¨è¿æ¥é˜Ÿåˆ—" style="zoom:50%;" />





TCPè¿æ¥çš„æ—¶å€™ï¼š

1ã€å…¨è¿æ¥é˜Ÿåˆ—ï¼š3æ¬¡æ¡æ‰‹æˆåŠŸåçš„è¿æ¥ä¿¡æ¯é˜Ÿåˆ—ï¼Œç”¨æ¥å¯¹æ¥ä¸Šä¼ APPçš„acceptå‡½æ•°çš„ã€‚

2ã€åŠè¿æ¥é˜Ÿåˆ—ï¼šåŠå¼€è¿æ¥ï¼Œæ”¶åˆ°SYNåçš„å­˜å‚¨é˜Ÿåˆ—ç”¨æ¥ç­‰å¾…åç»­2æ¬¡æ¡æ‰‹çš„ã€‚





ç„¶årocky9.2è¿˜æ˜¯æœ‰ä¸€ä¸ªå‘Šè­¦çš„

![image-20241230135001721](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230135001721.png)

![image-20241230135054278](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230135054278.png)



### é€æ˜å¤§é¡µTHPçš„ä¼˜åŒ–ä¹Ÿä¸éœ€è¦

![image-20241230140827377](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230140827377.png)

![image-20241230140917573](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230140917573.png)

è¿™ä¸ªè€ç‰ˆæœ¬çš„linuxéœ€è¦æ”¹ï¼Œè€Œä¸”è¿˜æ²¡æœ‰åŠæ³•é€šè¿‡sysctl.confé‡Œå»ä¿®æ”¹ï¼Œåªèƒ½ä¿®æ”¹å†…å­˜æ–‡ä»¶ï¼Œ/sys/kernel/mm/ä¹Ÿæ˜¯å†…å­˜æ–‡ä»¶ï¼Œé‡å¯ä¹Ÿå°±æ²¡äº†ã€‚æ‰€ä»¥éœ€è¦rc.localé‡Œå†™å¥½echo ä¿®æ”¹çš„å‘½ä»¤ä¿è¯å¼€æœºå¯åŠ¨ğŸ‘‡

![image-20241230141230204](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230141230204.png)



![image-20241230141425106](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230141425106.png)



### redisæ˜¯å¤šçº¿ç¨‹

![image-20241230142755647](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230142755647.png)

æœ‰ä¸ªlå°±ä»£è¡¨å¤šçº¿ç¨‹ï¼Œä¸Šä¸€èŠ‚é‡Œæœ‰è¯´è¿‡rediså•çº¿ç¨‹åªæ˜¯å“åº”ç”¨æˆ·è¯·æ±‚çš„å·¥ä½œæ˜¯å•çº¿ç¨‹ã€‚



![image-20241230142920206](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230142920206.png)

pstreeé‡ŒèŠ±æ‹¬å·å°±æ˜¯çº¿ç¨‹äº†ğŸ‘†





# å®¢æˆ·ç«¯å·¥å…·redis-cli



ç¼–è¯‘å®‰è£…åå°±åœ¨å®‰è£…çš„è·¯å¾„é‡Œ

![image-20241230143159121](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230143159121.png)



å¦‚æœæ˜¯åˆ«çš„æœºå™¨è¦ä½¿ç”¨rediså®¢æˆ·ç«¯è¿è¿‡æ¥ï¼Œå°±ä¸ä¼šå†å»ç¼–è¯‘å®‰è£…æ•´ä¸ªredis(serverå’Œcli)äº†ï¼Œè€Œæ˜¯å•å•å®‰è£…redis-cliäº†ã€‚

ç„¶åé€šè¿‡ldd å¯ä»¥åˆ¤æ–­å‡ºæ•´ä¸ªredis-cliä¸æ˜¯ä¸€ä¸ªç®€å•å¤åˆ¶è¿‡å»å°±èƒ½ç”¨çš„binæ–‡ä»¶ï¼Œéƒ½æ˜¯å…±äº«åº“--åŠ¨æ€ç¼–è¯‘çš„ï¼Œcè¯­è¨€ã€‚

![image-20241230143408863](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230143408863.png)



## **ç”¨telnetè¿æ¥redisï¼Œå……å½“redis-cli**

å…ˆä¿®æ”¹ç›‘å¬åœ°å€

![image-20241230144123464](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230144123464.png)

æ­¤æ—¶ç”¨å¦ä¸€å°æœºå™¨telnetçœ‹çœ‹

![image-20241230144707529](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230144707529.png)

è¦åŠ å¯†ç ï¼Œå¦åˆ™è¿ä¸äº†ï¼Œç”¨redis-cliä¸€æ ·å­˜åœ¨è¿™ä¸ªæƒ…å†µ

![image-20241230144920403](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230144920403.png)



å…ˆç”¨æœ¬åœ°çš„telnetçœ‹çœ‹å¸¸è§„æ“ä½œ



**info çœ‹æ‰€æœ‰çš„**

![image-20241230145602739](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230145602739.png)



**info serveråªçœ‹serverçš„ä¿¡æ¯**

<img src="3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230145615744.png" alt="image-20241230145615744" style="zoom:50%;" /> 







**çœ‹key**

<img src="3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230145844012.png" alt="image-20241230145844012" style="zoom:50%;" /> 

ç°åœ¨æ˜¯ç©ºçš„ğŸ‘†





**telnetçš„å‚æ•°æ²¡æœ‰redis-cliä¸°å¯Œ**

![image-20241230150047983](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230150047983.png)



**redisä¸ä¼šå¤ªå¤§å†…å­˜çš„åº•å±‚é€»è¾‘**

<img src="3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230150358341.png" alt="image-20241230150358341" style="zoom:30%;" />

å‡è®¾redisç”¨512Gå†…å­˜ï¼Œé‚£ä¹ˆæŒä¹…åŒ–ï¼ŒI/Oå°±ä¼šéå¸¸è€—æ—¶ï¼›åŒæ ·ä¸»ä»å¤åˆ¶ä¹Ÿä¼šè€—æ—¶å¤ªä¹…ï¼Œæ‰€ä»¥redisä¸€èˆ¬é¡¶å¤š32G/16Gäº†ä¸èµ·äº†ã€‚



å¦‚æœæœºå™¨æ ‡é…å†…å­˜å°±æ˜¯512Gï¼Œæ­¤æ—¶å°±å¯ä»¥é…ç½®rediså¤šå®ä¾‹æ¥å……åˆ†åˆ©ç”¨èµ·æ¥ã€‚ä½†æ˜¯å¤šå®ä¾‹ä¹Ÿæœ‰é—®é¢˜--å°±æ˜¯å®¿ä¸»ç‰©ç†æœºæŒ‚äº†ï¼Œå…¨éƒ¨å®ä¾‹rediséƒ½æŒ‚äº†ã€‚æ‰€ä»¥ä¸€èˆ¬å°±æ˜¯64G/128Gå†…å­˜ è·‘2-4ä¸ªrediså®ä¾‹å°±å¯ä»¥äº†ã€‚



### redis-cli



![image-20241230150831021](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230150831021.png)



![image-20241230151212271](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230151212271.png)



### å¼€å‘è¯­è¨€å¦‚ä½•è¿æ¥redis-server

è¿˜å¯ä»¥ç”¨å¼€å‘è¯­è¨€æ¥è¿ï¼Œå°±ä¼šæ¶‰åŠredisçš„apiå¼€å‘æ¥å£ï¼Œå°±è¦è°ƒç”¨è¿æ¥redisçš„åº“ï¼Œè¿™äº›åº“è¿˜ä¸æ˜¯å”¯ä¸€çš„ï¼Œå¼€æºçš„ã€‚

https://redis.io/docs/latest/develop/clients/redis-py/

![image-20241230151528407](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230151528407.png)



### pythonå¦‚ä½•å¯¹æ¥redis

![image-20241230161646029](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230161646029.png)

yum install python3-pip -y

pip install redis

![image-20241230161934060](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230161934060.png)

å½“å‰æ²¡å¯†ç ï¼Œåˆ äº†å¯†ç 



![image-20241230162122695](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230162122695.png)



![image-20241230162135669](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230162135669.png) 

...

...

![image-20241230162108597](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230162108597.png)

ä¸Šå›¾RDBæ˜¯è¾¾åˆ°ä¸€å®šæ•°æ®é‡å°±å¼€å§‹åšæŒä¹…åŒ–çš„æŠ¥é”™ï¼Œå…ˆä¸ç®¡ã€‚



ç„¶åç”¨redis-cliç™»å…¥è¿›å»çœ‹çœ‹key-value

![image-20241230162308712](3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230162308712.png)



<img src="3.Redisæ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ç«¯è®¿é—®.assets/image-20241230162400691.png" alt="image-20241230162400691" style="zoom:50%;" /> 



















